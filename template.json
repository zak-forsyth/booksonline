{
  "$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "nsgName": {
      "type": "string",
      "defaultValue": "[concat('NSG', resourceGroup().name)]",
      "metadata": { "description": "NSG" }
    },
    "AdminUserName": {
      "type": "string",
      "defaultValue": "[concat('adm', resourceGroup().name)]",
      "minLength": 1
    },
    "AdminPassword": {
      "type": "securestring",
      "defaultValue": "secureString"
    },
    "vmLocalUserName": {
      "type": "string",
      "defaultValue": "[concat('user', resourceGroup().name)]"
    },
    "vmLocalUserPassword": {
      "type": "string",
      "defaultValue": "[concat(toUpper(substring(uniqueString(resourceGroup().id, subscription().id),0,6)), '#', substring(uniqueString(resourceGroup().id, subscription().id),6,6) )]"
    },
    "vmLocalUserEmail": {
      "type": "string"
    },
    "PrimaryStorageAccountName": {
      "type": "string"
    },
    "PrimaryStorageAccountKey": {
      "type": "string"
    },
    "immersionScriptModuleFileLink": {
      "type": "string"
    },
    "configureJumphostScriptFileLink": {
      "type": "string"
    },
    "postRebootScriptFileLink": {
      "type": "string"
    },
    "win10userScriptFileLink": {
      "type": "string"
    },
    "BooksEditions-DailySnapshot-20190302.csv": {
      "type": "string"
    },
    "BooksEditions-DailySnapshot-Latest.orc": {
      "type": "string"
    },
    "RelatedReadingsPy.py": {
      "type": "string"
    },
    "sql-bookbeats-2019-3-7-8-56.bacpac": {
      "type": "string"
    },
    "UploadFileShareFiles.ps1": {
      "type": "string"
    },
    "Booklistpopularity.pbix": {
      "type": "string"
    },
    "jhDiskName": {
      "type": "string",
      "defaultValue": "jhImage",
      "metadata": {
        "description": "name of the jumphost image"
      }
    },
    "diskStorageType": {
      "type": "string",
      "allowedValues": [
        "Standard_LRS",
        "Premium_LRS"
      ],
      "defaultValue": "Premium_LRS"
    },
    "notDemo": {
      "type": "string"
    },
    "skipWebProxyInstall": {
      "type": "string"
    },
    "StorageaccountName": {
      "type": "string",
      "defaultValue": "[concat('sa', resourceGroup().name)]"
    },
    "StorageaccountType": {
      "type": "string",
      "defaultValue": "Premium_LRS",
      "allowedValues": [
        "Standard_LRS",
        "Standard_ZRS",
        "Standard_GRS",
        "Standard_RAGRS",
        "Premium_LRS"
      ]
    },
    "datafactoryName": {
      "type": "string",
      "defaultValue": "[concat('DataFactory', resourceGroup().name)]"
    },
    "DataLakeName": {
      "type": "string",
      "defaultValue": "[concat('datalake', resourceGroup().name)]"
    },
    "AzureSQLserverAdminLogin": {
      "type": "string",
      "minLength": 1,
      "defaultValue": "[concat('user', resourceGroup().name)]"
    },
    "AzureSQLserverName": {
      "type": "string",
      "minLength": 1,
      "defaultValue": "[concat('azuresql-', resourceGroup().name)]"
    },
    "AzureSQLserverAdminLoginPassword": {
      "type": "securestring"
    },
    "AzureSQLDBName": {
      "type": "string",
      "minLength": 1,
      "defaultValue": "wideworldimporters"
    },
    "AzureSQLDBName-bookbeat": {
      "type": "string",
      "minLength": 1,
      "defaultValue": "sql-bookbeat"
    },
    "AzureSQLDBCollation": {
      "type": "string",
      "minLength": 1,
      "defaultValue": "SQL_Latin1_General_CP1_CI_AS"
    },
    "AzureSQLDBEdition": {
      "type": "string",
      "defaultValue": "Standard",
      "allowedValues": [
        "Basic",
        "Standard",
        "Premium"
      ]
    },
    "AzureSQLDBRequestedServiceObjectiveName": {
      "type": "string",
      "defaultValue": "S2",
      "allowedValues": [
        "Basic",
        "S0",
        "S1",
        "S2",
        "P1",
        "P2",
        "P3"
      ],
      "metadata": {
        "description": "Describes the performance level for Edition"
      }
    },
    "AzureSQLDBIMPORTStorageKeyType": {
      "type": "string",
      "minLength": 1,
      "defaultValue": "Primary"
    },
    "AzureSQLDBIMPORTStorageKey": {
      "type": "securestring",
      "defaultValue": "wadCC02865JwMEtOdeU+7GbGlKOW20X5ER1NK4NkFVLpzEoC9mil1MOCOyrxeoiSdr7sOSy53V16EAHQ82yB9A=="
    },
    "AzureSQLDBIMPORTStorageUri-bookbeat": {
      "type": "string",
      "minLength": 1,
      "defaultValue": "https://sabookbeat.blob.core.windows.net/bookbeat/sql-bookbeats-2019-3-7-8-56.bacpac"
    },
    "AzureSQLDBIMPORTAdministratorLogin": {
      "type": "string",
      "minLength": 1,
      "defaultValue": "[concat('User', resourceGroup().name)]"
    },
    "AzureSQLDBIMPORTAdministratorLoginPassword": {
      "type": "securestring"
    },
    "AzureSQLDataWarehousedatabaseName": {
      "type": "string",
      "defaultValue": "[concat('DataWarehouse-', resourceGroup().name)]"
    },
    "AzureStorage_connectionString": {
      "type": "string",
      "defaultValue": ""
    },
    "AzureSqlDataWarehouse_connectionString": {
      "type": "string",
      "defaultValue": "[concat('Server=tcp:', parameters('AzureSQLserverName'),'.database.windows.net,1433;Initial Catalog=',parameters('AzureSQLDataWarehousedatabaseName'), ';Persist Security Info=False;User ID=', parameters('AzureSQLserverAdminLogin'), ';Password=', parameters('AzureSQLserverAdminLoginPassword'), ';Encrypt=True;TrustServerCertificate=False;Connection Timeout=30;')]"
    },
    "databricksworkspaceName": {
      "type": "string",
      "defaultValue": "[concat('databrickws', resourceGroup().name)]"
    },
    "dsADLBooksEditionsLatest_properties_typeProperties_fileName": {
      "type": "string",
      "defaultValue": "BooksEditions-DailySnapshot-Latest.orc"
    },
    "dsADLBooksEditionsLatest_properties_typeProperties_folderPath": {
      "type": "string",
      "defaultValue": "BackEnd/Books/Editions/Latest/"
    },
    "dsADLBooksEditions_properties_typeProperties_fileName": {
      "type": "string",
      "defaultValue": "@concat('BooksEditions-DailySnapshot-', formatDateTime(dataset().WindowStart, 'yyyyMMdd'), '.csv')"
    },
    "dsADLBooksEditions_properties_typeProperties_folderPath": {
      "type": "string",
      "defaultValue": "@concat('BackEnd/Books/Editions/', formatDateTime(dataset().WindowStart, 'yyyy/MM'), '/')"
    },
    "lsProdbbSQLDW_connectionString": {
      "type": "secureString",
      "metadata": "Secure string for 'connectionString' of 'lsProdbbSQLDW'",
      "defaultValue": "[concat('Server=tcp:', parameters('AzureSQLserverName'),'.database.windows.net,1433;Initial Catalog=',parameters('AzureSQLDataWarehousedatabaseName'), ';Persist Security Info=False;User ID=', parameters('AzureSQLserverAdminLogin'), ';Password=', parameters('AzureSQLserverAdminLoginPassword'), ';Encrypt=True;TrustServerCertificate=False;Connection Timeout=30;')]"
    },
    "lsProdbbSQLBBBooks_connectionString": {
      "type": "secureString",
      "metadata": "Secure string for 'connectionString' of 'lsProdbbSQLBBBooks'"
    },
    "lsProdbbAzureDatabricksWorm_accessToken": {
      "type": "secureString",
      "metadata": "Secure string for 'accessToken' of 'lsProdbbAzureDatabricksWorm'"
    },
    "lsProdbbAzureDataLakeStore_properties_typeProperties_dataLakeStoreUri": {
      "type": "string",
      "defaultValue": "[concat('https://', parameters('DataLakeName'), '.azuredatalakestore.net/webhdfs/v1')]"
    },
    "lsProdbbAzureDataLakeStore_properties_typeProperties_tenant": {
      "type": "string",
      "defaultValue": "fa23f4b5-cee9-4c9e-a774-d31b0f10c151"
    },
    "lsProdbbAzureDataLakeStore_properties_typeProperties_subscriptionId": {
      "type": "string",
      "defaultValue": "[subscription().id]"
    },
    "lsProdbbAzureDataLakeStore_properties_typeProperties_resourceGroupName": {
      "type": "string",
      "defaultValue": "[resourcegroup().name]"
    }
  },
  "variables": {
    "JumpHostVMName": "[concat('jh', resourceGroup().name)]",
    "adminusername": "[concat('adm', resourceGroup().name)]",
    "labusername": "[concat('user', resourceGroup().name)]",
    "JumphostVhd": "[concat('https://', parameters('PrimaryStorageAccountName'), '.blob.core.windows.net/assets/jumphost.vhd')]",
    "JumpHostDnsName": "[concat('vm', uniqueString(resourceGroup().id))]",
    "JumpHostVNet": "[concat('vnet', resourceGroup().name)]",
    "JumpHostVNetPrefix": "10.0.0.0/16",
    "JumpHostVNetSubnet1Name": "Subnet-1",
    "JumpHostVNetSubnet1Prefix": "10.0.0.0/24",
    "JumpHostVNetSubnet2Name": "Subnet-2",
    "JumpHostVNetSubnet2Prefix": "10.0.1.0/24",
    "JumpHostVMVmSize": "Standard_D2s_v3",
    "JumpHostVMVnetID": "[resourceId('Microsoft.Network/virtualNetworks/', variables('JumpHostVNet'))]",
    "JumpHostVMSubnetRef": "[concat(variables('JumpHostVMVnetID'), '/subnets/', variables('JumpHostVNetSubnet1Name'))]",
    "JumpHostVMNicName": "[concat(variables('JumpHostVMName'), 'NIC')]",
    "jumphostpublicipDnsName": "[concat('jumphost', resourceGroup().name)]",
    "nsgName": "[concat('nsg', uniqueString(resourceGroup().id))]",
    "container1Name": "bookbeat",
    "container2Name": "staging",
    "managedResourceGroupId": "[concat(subscription().id, '/resourceGroups/', variables('managedResourceGroupName'))]",
    "managedResourceGroupName": "[concat('databricks-rg-', parameters('databricksworkspaceName'), '-', uniqueString(parameters('databricksworkspaceName'), resourceGroup().id))]",
    "factoryId": "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]"
  },
  "resources": [
    {
      "type": "Microsoft.Network/networkSecurityGroups",
      "apiVersion": "2015-06-15",
      "location": "[resourceGroup().location]",
      "name": "[parameters('NsgName')]",
      "properties": {
        "securityRules": [
          {
            "name": "rdp-rule",
            "properties": {
              "description": "Allow RDP",
              "protocol": "Tcp",
              "sourcePortRange": "*",
              "destinationPortRange": "3389",
              "sourceAddressPrefix": "Internet",
              "destinationAddressPrefix": "*",
              "access": "Allow",
              "priority": 100,
              "direction": "Inbound"
            }
          },
          {
            "name": "web-rule",
            "properties": {
              "description": "Allow WEB",
              "protocol": "Tcp",
              "sourcePortRange": "*",
              "destinationPortRange": "80",
              "sourceAddressPrefix": "Internet",
              "destinationAddressPrefix": "*",
              "access": "Allow",
              "priority": 101,
              "direction": "Inbound"
            }
          },
          {
            "name": "open-hana-db-ports",
            "properties": {
              "protocol": "Tcp",
              "sourcePortRange": "*",
              "destinationPortRange": "30100-30199",
              "sourceAddressPrefix": "*",
              "destinationAddressPrefix": "*",
              "access": "Allow",
              "priority": 1020,
              "direction": "Inbound",
              "sourcePortRanges": [],
              "destinationPortRanges": [],
              "sourceAddressPrefixes": [],
              "destinationAddressPrefixes": []
            }
          },
          {
            "name": "SSH",
            "properties": {
              "protocol": "Tcp",
              "sourcePortRange": "*",
              "destinationPortRange": "22",
              "sourceAddressPrefix": "*",
              "destinationAddressPrefix": "*",
              "access": "Allow",
              "priority": 1001,
              "direction": "Inbound",
              "sourcePortRanges": [],
              "destinationPortRanges": [],
              "sourceAddressPrefixes": [],
              "destinationAddressPrefixes": []
            }
          },
          {
            "name": "XSA",
            "properties": {
              "protocol": "Tcp",
              "sourcePortRange": "*",
              "destinationPortRange": "50000-59999",
              "sourceAddressPrefix": "*",
              "destinationAddressPrefix": "*",
              "access": "Allow",
              "priority": 1040,
              "direction": "Inbound",
              "sourcePortRanges": [],
              "destinationPortRanges": [],
              "sourceAddressPrefixes": [],
              "destinationAddressPrefixes": []
            }
          },
          {
            "name": "XSA-HTTP",
            "properties": {
              "protocol": "Tcp",
              "sourcePortRange": "*",
              "destinationPortRange": "4000-4999",
              "sourceAddressPrefix": "*",
              "destinationAddressPrefix": "*",
              "access": "Allow",
              "priority": 1030,
              "direction": "Inbound",
              "sourcePortRanges": [],
              "destinationPortRanges": [],
              "sourceAddressPrefixes": [],
              "destinationAddressPrefixes": []
            }
          },
          {
            "name": "SUSE_HAWK_Port_7630",
            "properties": {
              "protocol": "*",
              "sourcePortRange": "*",
              "destinationPortRange": "7630",
              "sourceAddressPrefix": "*",
              "destinationAddressPrefix": "*",
              "access": "Allow",
              "priority": 1050,
              "direction": "Inbound",
              "sourcePortRanges": [],
              "destinationPortRanges": [],
              "sourceAddressPrefixes": [],
              "destinationAddressPrefixes": []
            }
          },
          {
            "name": "HANA-Studio",
            "properties": {
              "protocol": "Tcp",
              "sourcePortRange": "*",
              "destinationPortRange": "1128-1129",
              "sourceAddressPrefix": "*",
              "destinationAddressPrefix": "*",
              "access": "Allow",
              "priority": 1060,
              "direction": "Inbound",
              "sourcePortRanges": [],
              "destinationPortRanges": [],
              "sourceAddressPrefixes": [],
              "destinationAddressPrefixes": []
            }
          }
        ]
      }
    },
    {
      "name": "[variables('JumpHostVNet')]",
      "type": "Microsoft.Network/virtualNetworks",
      "location": "[resourceGroup().location]",
      "apiVersion": "2015-06-15",
      "dependsOn": [
        "[concat('Microsoft.Network/networkSecurityGroups/', parameters('nsgName'))]"
      ],
      "tags": {
        "displayName": "JumpHostVNet"
      },
      "properties": {
        "addressSpace": {
          "addressPrefixes": [
            "[variables('JumpHostVNetPrefix')]"
          ]
        },
        "subnets": [
          {
            "name": "[variables('JumpHostVNetSubnet1Name')]",
            "properties": {
              "addressPrefix": "[variables('JumpHostVNetSubnet1Prefix')]"
            }
          },
          {
            "name": "[variables('JumpHostVNetSubnet2Name')]",
            "properties": {
              "addressPrefix": "[variables('JumpHostVNetSubnet2Prefix')]",
              "networkSecurityGroup": {
                "id": "[resourceId('Microsoft.Network/networkSecurityGroups/', parameters('nsgName'))]"
              }

            }
          }
        ]
      }
    },
    {
      "name": "[variables('JumpHostVMNicName')]",
      "type": "Microsoft.Network/networkInterfaces",
      "location": "[resourceGroup().location]",
      "apiVersion": "2015-06-15",
      "dependsOn": [
        "[concat('Microsoft.Network/virtualNetworks/', variables('JumpHostVNet'))]",
        "[concat('Microsoft.Network/publicIPAddresses/', variables('jumphostpublicipDnsName'))]"
      ],
      "tags": {
        "displayName": "JumpHostVMNic"
      },
      "properties": {
        "ipConfigurations": [
          {
            "name": "ipconfig1",
            "properties": {
              "privateIPAllocationMethod": "Dynamic",
              "subnet": {
                "id": "[variables('JumpHostVMSubnetRef')]"
              },
              "publicIPAddress": {
                "id": "[resourceId('Microsoft.Network/publicIPAddresses/', variables('jumphostpublicipDnsName'))]"
              }
            }
          }
        ]
      }
    },
    {
      "name": "[variables('JumpHostVMName')]",
      "type": "Microsoft.Compute/virtualMachines",
      "location": "[resourceGroup().location]",
      "apiVersion": "2018-06-01",
      "dependsOn": [
        "[concat('Microsoft.Network/networkInterfaces/', variables('JumpHostVMNicName'))]"
      ],
      "tags": {
        "displayName": "JumpHostVM",
        "entryPoint": "[variables('JumpHostVMName')]",
        "startUpGroup": "A"
      },
      "properties": {
        "hardwareProfile": {
          "vmSize": "[variables('JumpHostVMVmSize')]"
        },
        "osProfile": {
          "computerName": "[variables('JumpHostVMName')]",
          "adminUsername": "[parameters('AdminUserName')]",
          "adminPassword": "[parameters('AdminPassword')]"
        },
        "storageProfile": {
          "osDisk": {
            "createOption": "fromImage",
            "managedDisk": {
              "storageAccountType": "[parameters('diskStorageType')]"
            }
          },
          "imageReference": {
            "publisher": "MicrosoftVisualStudio",
            "offer": "VisualStudio",
            "sku": "VS-2017-Comm-Win10-N",
            "version": "latest"
          }
        },
        "networkProfile": {
          "networkInterfaces": [
            {
              "id": "[resourceId('Microsoft.Network/networkInterfaces/', variables('JumpHostVMNicName'))]"
            }
          ]
        }
      },
      "resources": [
        {
          "name": "ConfigureJumpHost",
          "type": "extensions",
          "location": "[resourceGroup().location]",
          "apiVersion": "2015-06-15",
          "dependsOn": [
            "[concat('Microsoft.Compute/virtualMachines/', variables('JumpHostVMName'))]"
          ],
          "tags": {
            "displayName": "ConfigureJumpHost"
          },
          "properties": {
            "publisher": "Microsoft.Compute",
            "type": "CustomScriptExtension",
            "typeHandlerVersion": "1.8",
            "autoUpgradeMinorVersion": false,
            "settings": {
              "fileUris": [
                "[parameters('immersionScriptModuleFileLink')]"
              ],
              "scriptFileUri": "[parameters('configureJumphostScriptFileLink')]",
              "otherFileUris": [
                "[parameters('postRebootScriptFileLink')]",
                "[parameters('win10userScriptFileLink')]",
                "[parameters('BooksEditions-DailySnapshot-20190302.csv')]",
                "[parameters('BooksEditions-DailySnapshot-Latest.orc')]",
                "[parameters('RelatedReadingsPy.py')]",
                "[parameters('sql-bookbeats-2019-3-7-8-56.bacpac')]",
                "[parameters('UploadFileShareFiles.ps1')]",
                "[parameters('Booklistpopularity.pbix')]"
              ],
              "installGuide": false,
              "skipInstallWebProxy": "[parameters('skipWebProxyInstall')]",
              "vmLocalUserName": "[parameters('vmLocalUserName')]",
              "vmLocalUserEmail": "[parameters('vmLocalUserEmail')]",
              "resourceGroupName": "[resourceGroup().name]",
              "subscriptionId": "[subscription().id]",
              "commandToExecute": "powershell -NoProfile -NonInteractive -ExecutionPolicy Unrestricted -Command \"Import-Module ((Get-ChildItem -Recurse -Path Immersion.psm1).FullName); Invoke-CustomScript\""
            },
            "protectedSettings": {
              "storageAccountName": "[parameters('PrimaryStorageAccountName')]",
              "storageAccountKey": "[parameters('PrimaryStorageAccountKey')]",
              "vmLocalUserPassword": "[parameters('vmLocalUserPassword')]"
            }
          }
        }
      ]
    },
    {
      "name": "[variables('jumphostpublicipDnsName')]",
      "type": "Microsoft.Network/publicIPAddresses",
      "location": "[resourceGroup().location]",
      "apiVersion": "2015-06-15",
      "dependsOn": [],
      "tags": {
        "displayName": "JumpHostPublicIP"
      },
      "properties": {
        "publicIPAllocationMethod": "Dynamic",
        "dnsSettings": {
          "domainNameLabel": "[variables('JumpHostDnsName')]"
        }
      }
    },
    {
      "apiVersion": "2018-06-01",
      "name": "[parameters('datafactoryName')]",
      "tags": {
        "displayName": "Data Factory"
      },
      "location": "East US",
      "type": "Microsoft.DataFactory/factories",
      "identity": {
        "type": "SystemAssigned"
      },
      "resources": [
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeBooksEditionsSQLToSQLDWViaADL')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1_BooksEditions_From_SQLBB_To_ADL",
                "type": "Copy",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "SqlSource",
                    "sqlReaderQuery": "SELECT [Id]\n      ,[Title]\n      ,[Isbn]\n      ,[Cover]\n      ,[Publisher]\n      ,[PublishDate]\n      ,[Language]\n      ,[CreatedAt]\n      ,[ModifiedAt]\n      ,[DeletedAt]\n      ,[Book_Id]\n      ,[ContentType]\n      ,[Pages]\n      ,[Duration]\n      ,[BookBeatPublishDate]\n      ,[BookBeatViewDate]\n      ,[BookBeatUnpublishDate]\n      ,[SerializedApprovals]\n      ,[SerializedMarketRights]\n      ,[SerializedCopyrightOwners]\n  FROM [dbo].[Editions]"
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false,
                  "translator": {
                    "type": "TabularTranslator",
                    "columnMappings": {
                      "Id": "Id",
                      "Title": "Title",
                      "Isbn": "Isbn",
                      "Cover": "Cover",
                      "Publisher": "Publisher",
                      "PublishDate": "PublishDate",
                      "Language": "Language",
                      "CreatedAt": "CreatedAt",
                      "ModifiedAt": "ModifiedAt",
                      "DeletedAt": "DeletedAt",
                      "Book_Id": "Book_Id",
                      "ContentType": "ContentType",
                      "Pages": "Pages",
                      "Duration": "Duration",
                      "BookBeatPublishDate": "BookBeatPublishDate",
                      "BookBeatViewDate": "BookBeatViewDate",
                      "BookBeatUnpublishDate": "BookBeatUnpublishDate",
                      "SerializedApprovals": "SerializedApprovals",
                      "SerializedMarketRights": "SerializedMarketRights",
                      "SerializedCopyrightOwners": "SerializedCopyrightOwners"
                    }
                  }
                },
                "inputs": [
                  {
                    "referenceName": "dsSQLBBBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ]
              },
              {
                "name": "2_BooksEditions_From_ADL_To_ADLLatest",
                "type": "Copy",
                "dependsOn": [
                  {
                    "activity": "1_BooksEditions_From_SQLBB_To_ADL",
                    "dependencyConditions": [
                      "Succeeded"
                    ]
                  }
                ],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "AzureDataLakeStoreSource",
                    "recursive": false
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false,
                  "translator": {
                    "type": "TabularTranslator",
                    "columnMappings": {
                      "Id": "Id",
                      "Title": "Title",
                      "Isbn": "Isbn",
                      "Cover": "Cover",
                      "Publisher": "Publisher",
                      "PublishDate": "PublishDate",
                      "Language": "Language",
                      "CreatedAt": "CreatedAt",
                      "ModifiedAt": "ModifiedAt",
                      "DeletedAt": "DeletedAt",
                      "Book_Id": "Book_Id",
                      "ContentType": "ContentType",
                      "Pages": "Pages",
                      "Duration": "Duration",
                      "BookBeatPublishDate": "BookBeatPublishDate",
                      "BookBeatViewDate": "BookBeatViewDate",
                      "BookBeatUnpublishDate": "BookBeatUnpublishDate",
                      "SerializedApprovals": "SerializedApprovals",
                      "SerializedMarketRights": "SerializedMarketRights",
                      "SerializedCopyrightOwners": "SerializedCopyrightOwners"
                    }
                  }
                },
                "inputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditionsLatest",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ]
              },
              {
                "name": "3_BooksEditions_From_Stg_To_Hist",
                "type": "SqlServerStoredProcedure",
                "dependsOn": [
                  {
                    "activity": "2_BooksEditions_From_ADL_To_ADLLatest",
                    "dependencyConditions": [
                      "Succeeded"
                    ]
                  }
                ],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "storedProcedureName": "[concat('[labshist].[HandleHistoryBooksEditions]')]",
                  "storedProcedureParameters": {
                    "SliceEnd": {
                      "value": {
                        "value": "@formatDateTime(pipeline().parameters.WindowEnd, 'yyyy-MM-dd HH:mm:ss')",
                        "type": "Expression"
                      }
                    },
                    "SliceStart": {
                      "value": {
                        "value": "@formatDateTime(pipeline().parameters.WindowStart, 'yyyy-MM-dd HH:mm:ss')",
                        "type": "Expression"
                      }
                    }
                  }
                },
                "linkedServiceName": {
                  "referenceName": "lsProdbbSQLDW",
                  "type": "LinkedServiceReference"
                }
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/datasets/dsSQLBBBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditionsLatest')]",
            "[concat(variables('factoryId'), '/linkedServices/lsProdbbSQLDW')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeBooksSeriesSQLToSQLDWViaADL')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1_BooksEditions_From_SQLBB_To_ADL",
                "type": "Copy",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "SqlSource",
                    "sqlReaderQuery": "SELECT [Id]\n      ,[Title]\n      ,[Isbn]\n      ,[Cover]\n      ,[Publisher]\n      ,[PublishDate]\n      ,[Language]\n      ,[CreatedAt]\n      ,[ModifiedAt]\n      ,[DeletedAt]\n      ,[Book_Id]\n      ,[ContentType]\n      ,[Pages]\n      ,[Duration]\n      ,[BookBeatPublishDate]\n      ,[BookBeatViewDate]\n      ,[BookBeatUnpublishDate]\n      ,[SerializedApprovals]\n      ,[SerializedMarketRights]\n      ,[SerializedCopyrightOwners]\n  FROM [dbo].[Editions]"
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false,
                  "translator": {
                    "type": "TabularTranslator",
                    "columnMappings": {
                      "Id": "Id",
                      "Title": "Title",
                      "Isbn": "Isbn",
                      "Cover": "Cover",
                      "Publisher": "Publisher",
                      "PublishDate": "PublishDate",
                      "Language": "Language",
                      "CreatedAt": "CreatedAt",
                      "ModifiedAt": "ModifiedAt",
                      "DeletedAt": "DeletedAt",
                      "Book_Id": "Book_Id",
                      "ContentType": "ContentType",
                      "Pages": "Pages",
                      "Duration": "Duration",
                      "BookBeatPublishDate": "BookBeatPublishDate",
                      "BookBeatViewDate": "BookBeatViewDate",
                      "BookBeatUnpublishDate": "BookBeatUnpublishDate",
                      "SerializedApprovals": "SerializedApprovals",
                      "SerializedMarketRights": "SerializedMarketRights",
                      "SerializedCopyrightOwners": "SerializedCopyrightOwners"
                    }
                  }
                },
                "inputs": [
                  {
                    "referenceName": "dsSQLBBBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ]
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "folder": {
              "name": "BooksMaster Pipelines"
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/datasets/dsSQLBBBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditions')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeBooksGenreBooksSQLToSQLDWViaADL')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1_BooksEditions_From_SQLBB_To_ADL",
                "type": "Copy",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "SqlSource",
                    "sqlReaderQuery": "SELECT [Id]\n      ,[Title]\n      ,[Isbn]\n      ,[Cover]\n      ,[Publisher]\n      ,[PublishDate]\n      ,[Language]\n      ,[CreatedAt]\n      ,[ModifiedAt]\n      ,[DeletedAt]\n      ,[Book_Id]\n      ,[ContentType]\n      ,[Pages]\n      ,[Duration]\n      ,[BookBeatPublishDate]\n      ,[BookBeatViewDate]\n      ,[BookBeatUnpublishDate]\n      ,[SerializedApprovals]\n      ,[SerializedMarketRights]\n      ,[SerializedCopyrightOwners]\n  FROM [dbo].[Editions]"
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false,
                  "translator": {
                    "type": "TabularTranslator",
                    "columnMappings": {
                      "Id": "Id",
                      "Title": "Title",
                      "Isbn": "Isbn",
                      "Cover": "Cover",
                      "Publisher": "Publisher",
                      "PublishDate": "PublishDate",
                      "Language": "Language",
                      "CreatedAt": "CreatedAt",
                      "ModifiedAt": "ModifiedAt",
                      "DeletedAt": "DeletedAt",
                      "Book_Id": "Book_Id",
                      "ContentType": "ContentType",
                      "Pages": "Pages",
                      "Duration": "Duration",
                      "BookBeatPublishDate": "BookBeatPublishDate",
                      "BookBeatViewDate": "BookBeatViewDate",
                      "BookBeatUnpublishDate": "BookBeatUnpublishDate",
                      "SerializedApprovals": "SerializedApprovals",
                      "SerializedMarketRights": "SerializedMarketRights",
                      "SerializedCopyrightOwners": "SerializedCopyrightOwners"
                    }
                  }
                },
                "inputs": [
                  {
                    "referenceName": "dsSQLBBBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ]
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "folder": {
              "name": "BooksMaster Pipelines"
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/datasets/dsSQLBBBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditions')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeBooksBookViewModelsCosmosDBToSQLDWViaADL')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1_BooksEditions_From_SQLBB_To_ADL",
                "type": "Copy",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "SqlSource",
                    "sqlReaderQuery": "SELECT [Id]\n      ,[Title]\n      ,[Isbn]\n      ,[Cover]\n      ,[Publisher]\n      ,[PublishDate]\n      ,[Language]\n      ,[CreatedAt]\n      ,[ModifiedAt]\n      ,[DeletedAt]\n      ,[Book_Id]\n      ,[ContentType]\n      ,[Pages]\n      ,[Duration]\n      ,[BookBeatPublishDate]\n      ,[BookBeatViewDate]\n      ,[BookBeatUnpublishDate]\n      ,[SerializedApprovals]\n      ,[SerializedMarketRights]\n      ,[SerializedCopyrightOwners]\n  FROM [dbo].[Editions]"
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false,
                  "translator": {
                    "type": "TabularTranslator",
                    "columnMappings": {
                      "Id": "Id",
                      "Title": "Title",
                      "Isbn": "Isbn",
                      "Cover": "Cover",
                      "Publisher": "Publisher",
                      "PublishDate": "PublishDate",
                      "Language": "Language",
                      "CreatedAt": "CreatedAt",
                      "ModifiedAt": "ModifiedAt",
                      "DeletedAt": "DeletedAt",
                      "Book_Id": "Book_Id",
                      "ContentType": "ContentType",
                      "Pages": "Pages",
                      "Duration": "Duration",
                      "BookBeatPublishDate": "BookBeatPublishDate",
                      "BookBeatViewDate": "BookBeatViewDate",
                      "BookBeatUnpublishDate": "BookBeatUnpublishDate",
                      "SerializedApprovals": "SerializedApprovals",
                      "SerializedMarketRights": "SerializedMarketRights",
                      "SerializedCopyrightOwners": "SerializedCopyrightOwners"
                    }
                  }
                },
                "inputs": [
                  {
                    "referenceName": "dsSQLBBBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ]
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "folder": {
              "name": "BooksMaster Pipelines"
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/datasets/dsSQLBBBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditions')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeBooksGenresSQLToSQLDWViaADL')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1_BooksEditions_From_SQLBB_To_ADL",
                "type": "Copy",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "SqlSource",
                    "sqlReaderQuery": "SELECT [Id]\n      ,[Title]\n      ,[Isbn]\n      ,[Cover]\n      ,[Publisher]\n      ,[PublishDate]\n      ,[Language]\n      ,[CreatedAt]\n      ,[ModifiedAt]\n      ,[DeletedAt]\n      ,[Book_Id]\n      ,[ContentType]\n      ,[Pages]\n      ,[Duration]\n      ,[BookBeatPublishDate]\n      ,[BookBeatViewDate]\n      ,[BookBeatUnpublishDate]\n      ,[SerializedApprovals]\n      ,[SerializedMarketRights]\n      ,[SerializedCopyrightOwners]\n  FROM [dbo].[Editions]"
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false,
                  "translator": {
                    "type": "TabularTranslator",
                    "columnMappings": {
                      "Id": "Id",
                      "Title": "Title",
                      "Isbn": "Isbn",
                      "Cover": "Cover",
                      "Publisher": "Publisher",
                      "PublishDate": "PublishDate",
                      "Language": "Language",
                      "CreatedAt": "CreatedAt",
                      "ModifiedAt": "ModifiedAt",
                      "DeletedAt": "DeletedAt",
                      "Book_Id": "Book_Id",
                      "ContentType": "ContentType",
                      "Pages": "Pages",
                      "Duration": "Duration",
                      "BookBeatPublishDate": "BookBeatPublishDate",
                      "BookBeatViewDate": "BookBeatViewDate",
                      "BookBeatUnpublishDate": "BookBeatUnpublishDate",
                      "SerializedApprovals": "SerializedApprovals",
                      "SerializedMarketRights": "SerializedMarketRights",
                      "SerializedCopyrightOwners": "SerializedCopyrightOwners"
                    }
                  }
                },
                "inputs": [
                  {
                    "referenceName": "dsSQLBBBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ]
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "folder": {
              "name": "BooksMaster Pipelines"
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/datasets/dsSQLBBBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditions')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeBooksSeriesPartsSQLToSQLDWViaADL')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1_BooksEditions_From_SQLBB_To_ADL",
                "type": "Copy",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "SqlSource",
                    "sqlReaderQuery": "SELECT [Id]\n      ,[Title]\n      ,[Isbn]\n      ,[Cover]\n      ,[Publisher]\n      ,[PublishDate]\n      ,[Language]\n      ,[CreatedAt]\n      ,[ModifiedAt]\n      ,[DeletedAt]\n      ,[Book_Id]\n      ,[ContentType]\n      ,[Pages]\n      ,[Duration]\n      ,[BookBeatPublishDate]\n      ,[BookBeatViewDate]\n      ,[BookBeatUnpublishDate]\n      ,[SerializedApprovals]\n      ,[SerializedMarketRights]\n      ,[SerializedCopyrightOwners]\n  FROM [dbo].[Editions]"
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false,
                  "translator": {
                    "type": "TabularTranslator",
                    "columnMappings": {
                      "Id": "Id",
                      "Title": "Title",
                      "Isbn": "Isbn",
                      "Cover": "Cover",
                      "Publisher": "Publisher",
                      "PublishDate": "PublishDate",
                      "Language": "Language",
                      "CreatedAt": "CreatedAt",
                      "ModifiedAt": "ModifiedAt",
                      "DeletedAt": "DeletedAt",
                      "Book_Id": "Book_Id",
                      "ContentType": "ContentType",
                      "Pages": "Pages",
                      "Duration": "Duration",
                      "BookBeatPublishDate": "BookBeatPublishDate",
                      "BookBeatViewDate": "BookBeatViewDate",
                      "BookBeatUnpublishDate": "BookBeatUnpublishDate",
                      "SerializedApprovals": "SerializedApprovals",
                      "SerializedMarketRights": "SerializedMarketRights",
                      "SerializedCopyrightOwners": "SerializedCopyrightOwners"
                    }
                  }
                },
                "inputs": [
                  {
                    "referenceName": "dsSQLBBBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ]
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "folder": {
              "name": "BooksMaster Pipelines"
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/datasets/dsSQLBBBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditions')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeBooksMergedBooksSQLToSQLDWViaADL')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1_BooksEditions_From_SQLBB_To_ADL",
                "type": "Copy",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "SqlSource",
                    "sqlReaderQuery": "SELECT [Id]\n      ,[Title]\n      ,[Isbn]\n      ,[Cover]\n      ,[Publisher]\n      ,[PublishDate]\n      ,[Language]\n      ,[CreatedAt]\n      ,[ModifiedAt]\n      ,[DeletedAt]\n      ,[Book_Id]\n      ,[ContentType]\n      ,[Pages]\n      ,[Duration]\n      ,[BookBeatPublishDate]\n      ,[BookBeatViewDate]\n      ,[BookBeatUnpublishDate]\n      ,[SerializedApprovals]\n      ,[SerializedMarketRights]\n      ,[SerializedCopyrightOwners]\n  FROM [dbo].[Editions]"
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false,
                  "translator": {
                    "type": "TabularTranslator",
                    "columnMappings": {
                      "Id": "Id",
                      "Title": "Title",
                      "Isbn": "Isbn",
                      "Cover": "Cover",
                      "Publisher": "Publisher",
                      "PublishDate": "PublishDate",
                      "Language": "Language",
                      "CreatedAt": "CreatedAt",
                      "ModifiedAt": "ModifiedAt",
                      "DeletedAt": "DeletedAt",
                      "Book_Id": "Book_Id",
                      "ContentType": "ContentType",
                      "Pages": "Pages",
                      "Duration": "Duration",
                      "BookBeatPublishDate": "BookBeatPublishDate",
                      "BookBeatViewDate": "BookBeatViewDate",
                      "BookBeatUnpublishDate": "BookBeatUnpublishDate",
                      "SerializedApprovals": "SerializedApprovals",
                      "SerializedMarketRights": "SerializedMarketRights",
                      "SerializedCopyrightOwners": "SerializedCopyrightOwners"
                    }
                  }
                },
                "inputs": [
                  {
                    "referenceName": "dsSQLBBBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ]
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "folder": {
              "name": "BooksMaster Pipelines"
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/datasets/dsSQLBBBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditions')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeBooksTagGroupsSQLToSQLDWViaADL')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1_BooksEditions_From_SQLBB_To_ADL",
                "type": "Copy",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "SqlSource",
                    "sqlReaderQuery": "SELECT [Id]\n      ,[Title]\n      ,[Isbn]\n      ,[Cover]\n      ,[Publisher]\n      ,[PublishDate]\n      ,[Language]\n      ,[CreatedAt]\n      ,[ModifiedAt]\n      ,[DeletedAt]\n      ,[Book_Id]\n      ,[ContentType]\n      ,[Pages]\n      ,[Duration]\n      ,[BookBeatPublishDate]\n      ,[BookBeatViewDate]\n      ,[BookBeatUnpublishDate]\n      ,[SerializedApprovals]\n      ,[SerializedMarketRights]\n      ,[SerializedCopyrightOwners]\n  FROM [dbo].[Editions]"
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false,
                  "translator": {
                    "type": "TabularTranslator",
                    "columnMappings": {
                      "Id": "Id",
                      "Title": "Title",
                      "Isbn": "Isbn",
                      "Cover": "Cover",
                      "Publisher": "Publisher",
                      "PublishDate": "PublishDate",
                      "Language": "Language",
                      "CreatedAt": "CreatedAt",
                      "ModifiedAt": "ModifiedAt",
                      "DeletedAt": "DeletedAt",
                      "Book_Id": "Book_Id",
                      "ContentType": "ContentType",
                      "Pages": "Pages",
                      "Duration": "Duration",
                      "BookBeatPublishDate": "BookBeatPublishDate",
                      "BookBeatViewDate": "BookBeatViewDate",
                      "BookBeatUnpublishDate": "BookBeatUnpublishDate",
                      "SerializedApprovals": "SerializedApprovals",
                      "SerializedMarketRights": "SerializedMarketRights",
                      "SerializedCopyrightOwners": "SerializedCopyrightOwners"
                    }
                  }
                },
                "inputs": [
                  {
                    "referenceName": "dsSQLBBBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ]
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "folder": {
              "name": "BooksMaster Pipelines"
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/datasets/dsSQLBBBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditions')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeBooksTagGroupTagsSQLToSQLDWViaADL')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1_BooksEditions_From_SQLBB_To_ADL",
                "type": "Copy",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "SqlSource",
                    "sqlReaderQuery": "SELECT [Id]\n      ,[Title]\n      ,[Isbn]\n      ,[Cover]\n      ,[Publisher]\n      ,[PublishDate]\n      ,[Language]\n      ,[CreatedAt]\n      ,[ModifiedAt]\n      ,[DeletedAt]\n      ,[Book_Id]\n      ,[ContentType]\n      ,[Pages]\n      ,[Duration]\n      ,[BookBeatPublishDate]\n      ,[BookBeatViewDate]\n      ,[BookBeatUnpublishDate]\n      ,[SerializedApprovals]\n      ,[SerializedMarketRights]\n      ,[SerializedCopyrightOwners]\n  FROM [dbo].[Editions]"
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false,
                  "translator": {
                    "type": "TabularTranslator",
                    "columnMappings": {
                      "Id": "Id",
                      "Title": "Title",
                      "Isbn": "Isbn",
                      "Cover": "Cover",
                      "Publisher": "Publisher",
                      "PublishDate": "PublishDate",
                      "Language": "Language",
                      "CreatedAt": "CreatedAt",
                      "ModifiedAt": "ModifiedAt",
                      "DeletedAt": "DeletedAt",
                      "Book_Id": "Book_Id",
                      "ContentType": "ContentType",
                      "Pages": "Pages",
                      "Duration": "Duration",
                      "BookBeatPublishDate": "BookBeatPublishDate",
                      "BookBeatViewDate": "BookBeatViewDate",
                      "BookBeatUnpublishDate": "BookBeatUnpublishDate",
                      "SerializedApprovals": "SerializedApprovals",
                      "SerializedMarketRights": "SerializedMarketRights",
                      "SerializedCopyrightOwners": "SerializedCopyrightOwners"
                    }
                  }
                },
                "inputs": [
                  {
                    "referenceName": "dsSQLBBBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ]
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "folder": {
              "name": "BooksMaster Pipelines"
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/datasets/dsSQLBBBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditions')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeBooksEditionContributorsSQLToSQLDWViaADL')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1_BooksEditions_From_SQLBB_To_ADL",
                "type": "Copy",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "SqlSource",
                    "sqlReaderQuery": "SELECT [Id]\n      ,[Title]\n      ,[Isbn]\n      ,[Cover]\n      ,[Publisher]\n      ,[PublishDate]\n      ,[Language]\n      ,[CreatedAt]\n      ,[ModifiedAt]\n      ,[DeletedAt]\n      ,[Book_Id]\n      ,[ContentType]\n      ,[Pages]\n      ,[Duration]\n      ,[BookBeatPublishDate]\n      ,[BookBeatViewDate]\n      ,[BookBeatUnpublishDate]\n      ,[SerializedApprovals]\n      ,[SerializedMarketRights]\n      ,[SerializedCopyrightOwners]\n  FROM [dbo].[Editions]"
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false,
                  "translator": {
                    "type": "TabularTranslator",
                    "columnMappings": {
                      "Id": "Id",
                      "Title": "Title",
                      "Isbn": "Isbn",
                      "Cover": "Cover",
                      "Publisher": "Publisher",
                      "PublishDate": "PublishDate",
                      "Language": "Language",
                      "CreatedAt": "CreatedAt",
                      "ModifiedAt": "ModifiedAt",
                      "DeletedAt": "DeletedAt",
                      "Book_Id": "Book_Id",
                      "ContentType": "ContentType",
                      "Pages": "Pages",
                      "Duration": "Duration",
                      "BookBeatPublishDate": "BookBeatPublishDate",
                      "BookBeatViewDate": "BookBeatViewDate",
                      "BookBeatUnpublishDate": "BookBeatUnpublishDate",
                      "SerializedApprovals": "SerializedApprovals",
                      "SerializedMarketRights": "SerializedMarketRights",
                      "SerializedCopyrightOwners": "SerializedCopyrightOwners"
                    }
                  }
                },
                "inputs": [
                  {
                    "referenceName": "dsSQLBBBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ]
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "folder": {
              "name": "BooksMaster Pipelines"
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/datasets/dsSQLBBBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditions')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeBooksTagBooksSQLToSQLDWViaADL')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1_BooksEditions_From_SQLBB_To_ADL",
                "type": "Copy",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "SqlSource",
                    "sqlReaderQuery": "SELECT [Id]\n      ,[Title]\n      ,[Isbn]\n      ,[Cover]\n      ,[Publisher]\n      ,[PublishDate]\n      ,[Language]\n      ,[CreatedAt]\n      ,[ModifiedAt]\n      ,[DeletedAt]\n      ,[Book_Id]\n      ,[ContentType]\n      ,[Pages]\n      ,[Duration]\n      ,[BookBeatPublishDate]\n      ,[BookBeatViewDate]\n      ,[BookBeatUnpublishDate]\n      ,[SerializedApprovals]\n      ,[SerializedMarketRights]\n      ,[SerializedCopyrightOwners]\n  FROM [dbo].[Editions]"
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false,
                  "translator": {
                    "type": "TabularTranslator",
                    "columnMappings": {
                      "Id": "Id",
                      "Title": "Title",
                      "Isbn": "Isbn",
                      "Cover": "Cover",
                      "Publisher": "Publisher",
                      "PublishDate": "PublishDate",
                      "Language": "Language",
                      "CreatedAt": "CreatedAt",
                      "ModifiedAt": "ModifiedAt",
                      "DeletedAt": "DeletedAt",
                      "Book_Id": "Book_Id",
                      "ContentType": "ContentType",
                      "Pages": "Pages",
                      "Duration": "Duration",
                      "BookBeatPublishDate": "BookBeatPublishDate",
                      "BookBeatViewDate": "BookBeatViewDate",
                      "BookBeatUnpublishDate": "BookBeatUnpublishDate",
                      "SerializedApprovals": "SerializedApprovals",
                      "SerializedMarketRights": "SerializedMarketRights",
                      "SerializedCopyrightOwners": "SerializedCopyrightOwners"
                    }
                  }
                },
                "inputs": [
                  {
                    "referenceName": "dsSQLBBBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ]
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "folder": {
              "name": "BooksMaster Pipelines"
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/datasets/dsSQLBBBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditions')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeBooksBooksSQLToSQLDWViaADL')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1_BooksEditions_From_SQLBB_To_ADL",
                "type": "Copy",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "SqlSource",
                    "sqlReaderQuery": "SELECT [Id]\n      ,[Title]\n      ,[Isbn]\n      ,[Cover]\n      ,[Publisher]\n      ,[PublishDate]\n      ,[Language]\n      ,[CreatedAt]\n      ,[ModifiedAt]\n      ,[DeletedAt]\n      ,[Book_Id]\n      ,[ContentType]\n      ,[Pages]\n      ,[Duration]\n      ,[BookBeatPublishDate]\n      ,[BookBeatViewDate]\n      ,[BookBeatUnpublishDate]\n      ,[SerializedApprovals]\n      ,[SerializedMarketRights]\n      ,[SerializedCopyrightOwners]\n  FROM [dbo].[Editions]"
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false,
                  "translator": {
                    "type": "TabularTranslator",
                    "columnMappings": {
                      "Id": "Id",
                      "Title": "Title",
                      "Isbn": "Isbn",
                      "Cover": "Cover",
                      "Publisher": "Publisher",
                      "PublishDate": "PublishDate",
                      "Language": "Language",
                      "CreatedAt": "CreatedAt",
                      "ModifiedAt": "ModifiedAt",
                      "DeletedAt": "DeletedAt",
                      "Book_Id": "Book_Id",
                      "ContentType": "ContentType",
                      "Pages": "Pages",
                      "Duration": "Duration",
                      "BookBeatPublishDate": "BookBeatPublishDate",
                      "BookBeatViewDate": "BookBeatViewDate",
                      "BookBeatUnpublishDate": "BookBeatUnpublishDate",
                      "SerializedApprovals": "SerializedApprovals",
                      "SerializedMarketRights": "SerializedMarketRights",
                      "SerializedCopyrightOwners": "SerializedCopyrightOwners"
                    }
                  }
                },
                "inputs": [
                  {
                    "referenceName": "dsSQLBBBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ]
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "folder": {
              "name": "BooksMaster Pipelines"
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/datasets/dsSQLBBBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditions')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeBooksContributorsSQLToSQLDWViaADL')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1_BooksEditions_From_SQLBB_To_ADL",
                "type": "Copy",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "SqlSource",
                    "sqlReaderQuery": "SELECT [Id]\n      ,[Title]\n      ,[Isbn]\n      ,[Cover]\n      ,[Publisher]\n      ,[PublishDate]\n      ,[Language]\n      ,[CreatedAt]\n      ,[ModifiedAt]\n      ,[DeletedAt]\n      ,[Book_Id]\n      ,[ContentType]\n      ,[Pages]\n      ,[Duration]\n      ,[BookBeatPublishDate]\n      ,[BookBeatViewDate]\n      ,[BookBeatUnpublishDate]\n      ,[SerializedApprovals]\n      ,[SerializedMarketRights]\n      ,[SerializedCopyrightOwners]\n  FROM [dbo].[Editions]"
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false,
                  "translator": {
                    "type": "TabularTranslator",
                    "columnMappings": {
                      "Id": "Id",
                      "Title": "Title",
                      "Isbn": "Isbn",
                      "Cover": "Cover",
                      "Publisher": "Publisher",
                      "PublishDate": "PublishDate",
                      "Language": "Language",
                      "CreatedAt": "CreatedAt",
                      "ModifiedAt": "ModifiedAt",
                      "DeletedAt": "DeletedAt",
                      "Book_Id": "Book_Id",
                      "ContentType": "ContentType",
                      "Pages": "Pages",
                      "Duration": "Duration",
                      "BookBeatPublishDate": "BookBeatPublishDate",
                      "BookBeatViewDate": "BookBeatViewDate",
                      "BookBeatUnpublishDate": "BookBeatUnpublishDate",
                      "SerializedApprovals": "SerializedApprovals",
                      "SerializedMarketRights": "SerializedMarketRights",
                      "SerializedCopyrightOwners": "SerializedCopyrightOwners"
                    }
                  }
                },
                "inputs": [
                  {
                    "referenceName": "dsSQLBBBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ]
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "folder": {
              "name": "BooksMaster Pipelines"
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/datasets/dsSQLBBBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditions')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeBooksGenreTranslationsSQLToSQLDWViaADL')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1_BooksEditions_From_SQLBB_To_ADL",
                "type": "Copy",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "SqlSource",
                    "sqlReaderQuery": "SELECT [Id]\n      ,[Title]\n      ,[Isbn]\n      ,[Cover]\n      ,[Publisher]\n      ,[PublishDate]\n      ,[Language]\n      ,[CreatedAt]\n      ,[ModifiedAt]\n      ,[DeletedAt]\n      ,[Book_Id]\n      ,[ContentType]\n      ,[Pages]\n      ,[Duration]\n      ,[BookBeatPublishDate]\n      ,[BookBeatViewDate]\n      ,[BookBeatUnpublishDate]\n      ,[SerializedApprovals]\n      ,[SerializedMarketRights]\n      ,[SerializedCopyrightOwners]\n  FROM [dbo].[Editions]"
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false,
                  "translator": {
                    "type": "TabularTranslator",
                    "columnMappings": {
                      "Id": "Id",
                      "Title": "Title",
                      "Isbn": "Isbn",
                      "Cover": "Cover",
                      "Publisher": "Publisher",
                      "PublishDate": "PublishDate",
                      "Language": "Language",
                      "CreatedAt": "CreatedAt",
                      "ModifiedAt": "ModifiedAt",
                      "DeletedAt": "DeletedAt",
                      "Book_Id": "Book_Id",
                      "ContentType": "ContentType",
                      "Pages": "Pages",
                      "Duration": "Duration",
                      "BookBeatPublishDate": "BookBeatPublishDate",
                      "BookBeatViewDate": "BookBeatViewDate",
                      "BookBeatUnpublishDate": "BookBeatUnpublishDate",
                      "SerializedApprovals": "SerializedApprovals",
                      "SerializedMarketRights": "SerializedMarketRights",
                      "SerializedCopyrightOwners": "SerializedCopyrightOwners"
                    }
                  }
                },
                "inputs": [
                  {
                    "referenceName": "dsSQLBBBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ]
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "folder": {
              "name": "BooksMaster Pipelines"
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/datasets/dsSQLBBBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditions')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeDefineAllContributorsSQLDWStoredProc')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1_BooksEditions_From_SQLBB_To_ADL",
                "type": "Copy",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "SqlSource",
                    "sqlReaderQuery": "SELECT [Id]\n      ,[Title]\n      ,[Isbn]\n      ,[Cover]\n      ,[Publisher]\n      ,[PublishDate]\n      ,[Language]\n      ,[CreatedAt]\n      ,[ModifiedAt]\n      ,[DeletedAt]\n      ,[Book_Id]\n      ,[ContentType]\n      ,[Pages]\n      ,[Duration]\n      ,[BookBeatPublishDate]\n      ,[BookBeatViewDate]\n      ,[BookBeatUnpublishDate]\n      ,[SerializedApprovals]\n      ,[SerializedMarketRights]\n      ,[SerializedCopyrightOwners]\n  FROM [dbo].[Editions]"
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false,
                  "translator": {
                    "type": "TabularTranslator",
                    "columnMappings": {
                      "Id": "Id",
                      "Title": "Title",
                      "Isbn": "Isbn",
                      "Cover": "Cover",
                      "Publisher": "Publisher",
                      "PublishDate": "PublishDate",
                      "Language": "Language",
                      "CreatedAt": "CreatedAt",
                      "ModifiedAt": "ModifiedAt",
                      "DeletedAt": "DeletedAt",
                      "Book_Id": "Book_Id",
                      "ContentType": "ContentType",
                      "Pages": "Pages",
                      "Duration": "Duration",
                      "BookBeatPublishDate": "BookBeatPublishDate",
                      "BookBeatViewDate": "BookBeatViewDate",
                      "BookBeatUnpublishDate": "BookBeatUnpublishDate",
                      "SerializedApprovals": "SerializedApprovals",
                      "SerializedMarketRights": "SerializedMarketRights",
                      "SerializedCopyrightOwners": "SerializedCopyrightOwners"
                    }
                  }
                },
                "inputs": [
                  {
                    "referenceName": "dsSQLBBBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ]
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "folder": {
              "name": "BooksMaster Pipelines"
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/datasets/dsSQLBBBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditions')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeBooksTagsSQLToSQLDWViaADL')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1_BooksEditions_From_SQLBB_To_ADL",
                "type": "Copy",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "SqlSource",
                    "sqlReaderQuery": "SELECT [Id]\n      ,[Title]\n      ,[Isbn]\n      ,[Cover]\n      ,[Publisher]\n      ,[PublishDate]\n      ,[Language]\n      ,[CreatedAt]\n      ,[ModifiedAt]\n      ,[DeletedAt]\n      ,[Book_Id]\n      ,[ContentType]\n      ,[Pages]\n      ,[Duration]\n      ,[BookBeatPublishDate]\n      ,[BookBeatViewDate]\n      ,[BookBeatUnpublishDate]\n      ,[SerializedApprovals]\n      ,[SerializedMarketRights]\n      ,[SerializedCopyrightOwners]\n  FROM [dbo].[Editions]"
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false,
                  "translator": {
                    "type": "TabularTranslator",
                    "columnMappings": {
                      "Id": "Id",
                      "Title": "Title",
                      "Isbn": "Isbn",
                      "Cover": "Cover",
                      "Publisher": "Publisher",
                      "PublishDate": "PublishDate",
                      "Language": "Language",
                      "CreatedAt": "CreatedAt",
                      "ModifiedAt": "ModifiedAt",
                      "DeletedAt": "DeletedAt",
                      "Book_Id": "Book_Id",
                      "ContentType": "ContentType",
                      "Pages": "Pages",
                      "Duration": "Duration",
                      "BookBeatPublishDate": "BookBeatPublishDate",
                      "BookBeatViewDate": "BookBeatViewDate",
                      "BookBeatUnpublishDate": "BookBeatUnpublishDate",
                      "SerializedApprovals": "SerializedApprovals",
                      "SerializedMarketRights": "SerializedMarketRights",
                      "SerializedCopyrightOwners": "SerializedCopyrightOwners"
                    }
                  }
                },
                "inputs": [
                  {
                    "referenceName": "dsSQLBBBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ]
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "folder": {
              "name": "BooksMaster Pipelines"
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/datasets/dsSQLBBBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditions')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeZZZBooksMaster')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "101-pipeBooksEditionContributors",
                "type": "ExecutePipeline",
                "dependsOn": [],
                "userProperties": [],
                "typeProperties": {
                  "pipeline": {
                    "referenceName": "pipeBooksEditionContributorsSQLToSQLDWViaADL",
                    "type": "PipelineReference"
                  },
                  "waitOnCompletion": true,
                  "parameters": {
                    "WindowStart": {
                      "value": "@pipeline().parameters.WindowStart",
                      "type": "Expression"
                    },
                    "WindowEnd": {
                      "value": "@pipeline().parameters.WindowEnd",
                      "type": "Expression"
                    }
                  }
                }
              },
              {
                "name": "102-pipeBooksContributors",
                "type": "ExecutePipeline",
                "dependsOn": [],
                "userProperties": [],
                "typeProperties": {
                  "pipeline": {
                    "referenceName": "pipeBooksContributorsSQLToSQLDWViaADL",
                    "type": "PipelineReference"
                  },
                  "waitOnCompletion": true,
                  "parameters": {
                    "WindowStart": {
                      "value": "@pipeline().parameters.WindowStart",
                      "type": "Expression"
                    },
                    "WindowEnd": {
                      "value": "@pipeline().parameters.WindowEnd",
                      "type": "Expression"
                    }
                  }
                }
              },
              {
                "name": "103-pipeBooksBooks",
                "type": "ExecutePipeline",
                "dependsOn": [
                  {
                    "activity": "102-pipeBooksContributors",
                    "dependencyConditions": [
                      "Succeeded"
                    ]
                  }
                ],
                "userProperties": [],
                "typeProperties": {
                  "pipeline": {
                    "referenceName": "pipeBooksBooksSQLToSQLDWViaADL",
                    "type": "PipelineReference"
                  },
                  "waitOnCompletion": true,
                  "parameters": {
                    "WindowStart": {
                      "value": "@pipeline().parameters.WindowStart",
                      "type": "Expression"
                    },
                    "WindowEnd": {
                      "value": "@pipeline().parameters.WindowEnd",
                      "type": "Expression"
                    }
                  }
                }
              },
              {
                "name": "104-pipeBooksEditions",
                "type": "ExecutePipeline",
                "dependsOn": [
                  {
                    "activity": "103-pipeBooksBooks",
                    "dependencyConditions": [
                      "Succeeded"
                    ]
                  }
                ],
                "userProperties": [],
                "typeProperties": {
                  "pipeline": {
                    "referenceName": "pipeBooksEditionsSQLToSQLDWViaADL",
                    "type": "PipelineReference"
                  },
                  "waitOnCompletion": true,
                  "parameters": {
                    "WindowStart": {
                      "value": "@pipeline().parameters.WindowStart",
                      "type": "Expression"
                    },
                    "WindowEnd": {
                      "value": "@pipeline().parameters.WindowEnd",
                      "type": "Expression"
                    }
                  }
                }
              },
              {
                "name": "105-pipeBooksGenreBooks",
                "type": "ExecutePipeline",
                "dependsOn": [
                  {
                    "activity": "104-pipeBooksEditions",
                    "dependencyConditions": [
                      "Succeeded"
                    ]
                  }
                ],
                "userProperties": [],
                "typeProperties": {
                  "pipeline": {
                    "referenceName": "pipeBooksGenreBooksSQLToSQLDWViaADL",
                    "type": "PipelineReference"
                  },
                  "waitOnCompletion": true,
                  "parameters": {
                    "WindowStart": {
                      "value": "@pipeline().parameters.WindowStart",
                      "type": "Expression"
                    },
                    "WindowEnd": {
                      "value": "@pipeline().parameters.WindowEnd",
                      "type": "Expression"
                    }
                  }
                }
              },
              {
                "name": "106-pipeBooksGenres",
                "type": "ExecutePipeline",
                "dependsOn": [
                  {
                    "activity": "105-pipeBooksGenreBooks",
                    "dependencyConditions": [
                      "Succeeded"
                    ]
                  }
                ],
                "userProperties": [],
                "typeProperties": {
                  "pipeline": {
                    "referenceName": "pipeBooksGenresSQLToSQLDWViaADL",
                    "type": "PipelineReference"
                  },
                  "waitOnCompletion": true,
                  "parameters": {
                    "WindowStart": {
                      "value": "@pipeline().parameters.WindowStart",
                      "type": "Expression"
                    },
                    "WindowEnd": {
                      "value": "@pipeline().parameters.WindowEnd",
                      "type": "Expression"
                    }
                  }
                }
              },
              {
                "name": "107-pipeBooksGenreTranslations",
                "type": "ExecutePipeline",
                "dependsOn": [
                  {
                    "activity": "106-pipeBooksGenres",
                    "dependencyConditions": [
                      "Succeeded"
                    ]
                  }
                ],
                "userProperties": [],
                "typeProperties": {
                  "pipeline": {
                    "referenceName": "pipeBooksGenreTranslationsSQLToSQLDWViaADL",
                    "type": "PipelineReference"
                  },
                  "waitOnCompletion": true,
                  "parameters": {
                    "WindowStart": {
                      "value": "@pipeline().parameters.WindowStart",
                      "type": "Expression"
                    },
                    "WindowEnd": {
                      "value": "@pipeline().parameters.WindowEnd",
                      "type": "Expression"
                    }
                  }
                }
              },
              {
                "name": "108-pipeBooksMergedBooks",
                "type": "ExecutePipeline",
                "dependsOn": [
                  {
                    "activity": "107-pipeBooksGenreTranslations",
                    "dependencyConditions": [
                      "Succeeded"
                    ]
                  }
                ],
                "userProperties": [],
                "typeProperties": {
                  "pipeline": {
                    "referenceName": "pipeBooksMergedBooksSQLToSQLDWViaADL",
                    "type": "PipelineReference"
                  },
                  "waitOnCompletion": true,
                  "parameters": {
                    "WindowStart": {
                      "value": "@pipeline().parameters.WindowStart",
                      "type": "Expression"
                    },
                    "WindowEnd": {
                      "value": "@pipeline().parameters.WindowEnd",
                      "type": "Expression"
                    }
                  }
                }
              },
              {
                "name": "109-pipeBooksSeriesParts",
                "type": "ExecutePipeline",
                "dependsOn": [
                  {
                    "activity": "110-pipeBooksSeries",
                    "dependencyConditions": [
                      "Succeeded"
                    ]
                  }
                ],
                "userProperties": [],
                "typeProperties": {
                  "pipeline": {
                    "referenceName": "pipeBooksSeriesPartsSQLToSQLDWViaADL",
                    "type": "PipelineReference"
                  },
                  "waitOnCompletion": true,
                  "parameters": {
                    "WindowStart": {
                      "value": "@pipeline().parameters.WindowStart",
                      "type": "Expression"
                    },
                    "WindowEnd": {
                      "value": "@pipeline().parameters.WindowEnd",
                      "type": "Expression"
                    }
                  }
                }
              },
              {
                "name": "110-pipeBooksSeries",
                "type": "ExecutePipeline",
                "dependsOn": [
                  {
                    "activity": "108-pipeBooksMergedBooks",
                    "dependencyConditions": [
                      "Succeeded"
                    ]
                  }
                ],
                "userProperties": [],
                "typeProperties": {
                  "pipeline": {
                    "referenceName": "pipeBooksSeriesSQLToSQLDWViaADL",
                    "type": "PipelineReference"
                  },
                  "waitOnCompletion": true,
                  "parameters": {
                    "WindowStart": {
                      "value": "@pipeline().parameters.WindowStart",
                      "type": "Expression"
                    },
                    "WindowEnd": {
                      "value": "@pipeline().parameters.WindowEnd",
                      "type": "Expression"
                    }
                  }
                }
              },
              {
                "name": "111-pipeBooksTagBooks",
                "type": "ExecutePipeline",
                "dependsOn": [
                  {
                    "activity": "109-pipeBooksSeriesParts",
                    "dependencyConditions": [
                      "Succeeded"
                    ]
                  }
                ],
                "userProperties": [],
                "typeProperties": {
                  "pipeline": {
                    "referenceName": "pipeBooksTagBooksSQLToSQLDWViaADL",
                    "type": "PipelineReference"
                  },
                  "waitOnCompletion": true,
                  "parameters": {
                    "WindowStart": {
                      "value": "@pipeline().parameters.WindowStart",
                      "type": "Expression"
                    },
                    "WindowEnd": {
                      "value": "@pipeline().parameters.WindowEnd",
                      "type": "Expression"
                    }
                  }
                }
              },
              {
                "name": "112-pipeBooksTagGroups",
                "type": "ExecutePipeline",
                "dependsOn": [
                  {
                    "activity": "111-pipeBooksTagBooks",
                    "dependencyConditions": [
                      "Succeeded"
                    ]
                  }
                ],
                "userProperties": [],
                "typeProperties": {
                  "pipeline": {
                    "referenceName": "pipeBooksTagGroupsSQLToSQLDWViaADL",
                    "type": "PipelineReference"
                  },
                  "waitOnCompletion": true,
                  "parameters": {
                    "WindowStart": {
                      "value": "@pipeline().parameters.WindowStart",
                      "type": "Expression"
                    },
                    "WindowEnd": {
                      "value": "@pipeline().parameters.WindowEnd",
                      "type": "Expression"
                    }
                  }
                }
              },
              {
                "name": "113-pipeBooksTagGroupTags",
                "type": "ExecutePipeline",
                "dependsOn": [
                  {
                    "activity": "112-pipeBooksTagGroups",
                    "dependencyConditions": [
                      "Succeeded"
                    ]
                  }
                ],
                "userProperties": [],
                "typeProperties": {
                  "pipeline": {
                    "referenceName": "pipeBooksTagGroupTagsSQLToSQLDWViaADL",
                    "type": "PipelineReference"
                  },
                  "waitOnCompletion": true,
                  "parameters": {
                    "WindowStart": {
                      "value": "@pipeline().parameters.WindowStart",
                      "type": "Expression"
                    },
                    "WindowEnd": {
                      "value": "@pipeline().parameters.WindowEnd",
                      "type": "Expression"
                    }
                  }
                }
              },
              {
                "name": "114-pipeBooksTags",
                "type": "ExecutePipeline",
                "dependsOn": [
                  {
                    "activity": "113-pipeBooksTagGroupTags",
                    "dependencyConditions": [
                      "Succeeded"
                    ]
                  }
                ],
                "userProperties": [],
                "typeProperties": {
                  "pipeline": {
                    "referenceName": "pipeBooksTagsSQLToSQLDWViaADL",
                    "type": "PipelineReference"
                  },
                  "waitOnCompletion": true,
                  "parameters": {
                    "WindowStart": {
                      "value": "@pipeline().parameters.WindowStart",
                      "type": "Expression"
                    },
                    "WindowEnd": {
                      "value": "@pipeline().parameters.WindowEnd",
                      "type": "Expression"
                    }
                  }
                }
              },
              {
                "name": "201-pipeDefineAllContributors",
                "type": "ExecutePipeline",
                "dependsOn": [
                  {
                    "activity": "101-pipeBooksEditionContributors",
                    "dependencyConditions": [
                      "Succeeded"
                    ]
                  },
                  {
                    "activity": "102-pipeBooksContributors",
                    "dependencyConditions": [
                      "Succeeded"
                    ]
                  }
                ],
                "userProperties": [],
                "typeProperties": {
                  "pipeline": {
                    "referenceName": "pipeDefineAllContributorsSQLDWStoredProc",
                    "type": "PipelineReference"
                  },
                  "waitOnCompletion": true,
                  "parameters": {
                    "WindowStart": {
                      "value": "@pipeline().parameters.WindowStart",
                      "type": "Expression"
                    },
                    "WindowEnd": {
                      "value": "@pipeline().parameters.WindowEnd",
                      "type": "Expression"
                    }
                  }
                }
              },
              {
                "name": "115-pipeBooksBookViewModels",
                "type": "ExecutePipeline",
                "dependsOn": [
                  {
                    "activity": "114-pipeBooksTags",
                    "dependencyConditions": [
                      "Succeeded"
                    ]
                  }
                ],
                "userProperties": [],
                "typeProperties": {
                  "pipeline": {
                    "referenceName": "pipeBooksBookViewModelsCosmosDBToSQLDWViaADL",
                    "type": "PipelineReference"
                  },
                  "waitOnCompletion": true,
                  "parameters": {
                    "WindowStart": {
                      "value": "@pipeline().parameters.WindowStart",
                      "type": "Expression"
                    },
                    "WindowEnd": {
                      "value": "@pipeline().parameters.WindowEnd",
                      "type": "Expression"
                    }
                  }
                }
              }
            ],
            "parameters": {
              "WindowStart": {
                "type": "String"
              },
              "WindowEnd": {
                "type": "String"
              }
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/pipelines/pipeBooksEditionContributorsSQLToSQLDWViaADL')]",
            "[concat(variables('factoryId'), '/pipelines/pipeBooksContributorsSQLToSQLDWViaADL')]",
            "[concat(variables('factoryId'), '/pipelines/pipeBooksBooksSQLToSQLDWViaADL')]",
            "[concat(variables('factoryId'), '/pipelines/pipeBooksEditionsSQLToSQLDWViaADL')]",
            "[concat(variables('factoryId'), '/pipelines/pipeBooksGenreBooksSQLToSQLDWViaADL')]",
            "[concat(variables('factoryId'), '/pipelines/pipeBooksGenresSQLToSQLDWViaADL')]",
            "[concat(variables('factoryId'), '/pipelines/pipeBooksGenreTranslationsSQLToSQLDWViaADL')]",
            "[concat(variables('factoryId'), '/pipelines/pipeBooksMergedBooksSQLToSQLDWViaADL')]",
            "[concat(variables('factoryId'), '/pipelines/pipeBooksSeriesPartsSQLToSQLDWViaADL')]",
            "[concat(variables('factoryId'), '/pipelines/pipeBooksSeriesSQLToSQLDWViaADL')]",
            "[concat(variables('factoryId'), '/pipelines/pipeBooksTagBooksSQLToSQLDWViaADL')]",
            "[concat(variables('factoryId'), '/pipelines/pipeBooksTagGroupsSQLToSQLDWViaADL')]",
            "[concat(variables('factoryId'), '/pipelines/pipeBooksTagGroupTagsSQLToSQLDWViaADL')]",
            "[concat(variables('factoryId'), '/pipelines/pipeBooksTagsSQLToSQLDWViaADL')]",
            "[concat(variables('factoryId'), '/pipelines/pipeDefineAllContributorsSQLDWStoredProc')]",
            "[concat(variables('factoryId'), '/pipelines/pipeBooksBookViewModelsCosmosDBToSQLDWViaADL')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeDefineDimBookSQLDWStoredProc')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1_Define_DimBook",
                "type": "SqlServerStoredProcedure",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 0,
                  "retryIntervalInSeconds": 30
                },
                "userProperties": [],
                "typeProperties": {
                  "storedProcedureName": "[concat('[labsdim].[LoadAndDefineBookDimension]')]",
                  "storedProcedureParameters": {
                    "dEnd": {
                      "value": {
                        "value": "@formatDateTime(pipeline().parameters.WindowEnd, 'yyyy-MM-dd HH:mm:ss')",
                        "type": "Expression"
                      }
                    },
                    "dStart": {
                      "value": {
                        "value": "@formatDateTime(pipeline().parameters.WindowStart, 'yyyy-MM-dd HH:mm:ss')",
                        "type": "Expression"
                      }
                    }
                  }
                },
                "linkedServiceName": {
                  "referenceName": "lsProdbbSQLDW",
                  "type": "LinkedServiceReference"
                }
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/linkedServices/lsProdbbSQLDW')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeRelatedReadingsGenerate')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1-ControlExternalExport",
                "type": "Copy",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "SqlSource",
                    "sqlReaderQuery": "SELECT [Id]\n      ,[Title]\n      ,[Isbn]\n      ,[Cover]\n      ,[Publisher]\n      ,[PublishDate]\n      ,[Language]\n      ,[CreatedAt]\n      ,[ModifiedAt]\n      ,[DeletedAt]\n      ,[Book_Id]\n      ,[ContentType]\n      ,[Pages]\n      ,[Duration]\n      ,[BookBeatPublishDate]\n      ,[BookBeatViewDate]\n      ,[BookBeatUnpublishDate]\n      ,[SerializedApprovals]\n      ,[SerializedMarketRights]\n      ,[SerializedCopyrightOwners]\n  FROM [dbo].[Editions]"
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false,
                  "translator": {
                    "type": "TabularTranslator",
                    "columnMappings": {
                      "Id": "Id",
                      "Title": "Title",
                      "Isbn": "Isbn",
                      "Cover": "Cover",
                      "Publisher": "Publisher",
                      "PublishDate": "PublishDate",
                      "Language": "Language",
                      "CreatedAt": "CreatedAt",
                      "ModifiedAt": "ModifiedAt",
                      "DeletedAt": "DeletedAt",
                      "Book_Id": "Book_Id",
                      "ContentType": "ContentType",
                      "Pages": "Pages",
                      "Duration": "Duration",
                      "BookBeatPublishDate": "BookBeatPublishDate",
                      "BookBeatViewDate": "BookBeatViewDate",
                      "BookBeatUnpublishDate": "BookBeatUnpublishDate",
                      "SerializedApprovals": "SerializedApprovals",
                      "SerializedMarketRights": "SerializedMarketRights",
                      "SerializedCopyrightOwners": "SerializedCopyrightOwners"
                    }
                  }
                },
                "inputs": [
                  {
                    "referenceName": "dsSQLBBBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ]
              },
              {
                "name": "2-If-NoErrors-Export",
                "type": "IfCondition",
                "dependsOn": [
                  {
                    "activity": "1-ControlExternalExport",
                    "dependencyConditions": [
                      "Succeeded"
                    ]
                  }
                ],
                "userProperties": [],
                "typeProperties": {
                  "expression": {
                    "value": "@equals(activity('1-ControlExternalExport').output.rowsCopied,0)",
                    "type": "Expression"
                  },
                  "ifTrueActivities": [
                    {
                      "name": "2-RelatedReadings",
                      "type": "DatabricksNotebook",
                      "dependsOn": [],
                      "policy": {
                        "timeout": "7.00:00:00",
                        "retry": 0,
                        "retryIntervalInSeconds": 30,
                        "secureOutput": false,
                        "secureInput": false
                      },
                      "userProperties": [],
                      "typeProperties": {
                        "notebookPath": "/Shared/BookBeats Demo"
                      },
                      "linkedServiceName": {
                        "referenceName": "lsProdbbAzureDatabricksWorm",
                        "type": "LinkedServiceReference"
                      }
                    }
                  ]
                }
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/datasets/dsSQLBBBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditions')]",
            "[concat(variables('factoryId'), '/linkedServices/lsProdbbAzureDatabricksWorm')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeZZZAppViewsMaster')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1_BooksEditions_From_SQLBB_To_ADL",
                "type": "Copy",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "SqlSource",
                    "sqlReaderQuery": "SELECT [Id]\n      ,[Title]\n      ,[Isbn]\n      ,[Cover]\n      ,[Publisher]\n      ,[PublishDate]\n      ,[Language]\n      ,[CreatedAt]\n      ,[ModifiedAt]\n      ,[DeletedAt]\n      ,[Book_Id]\n      ,[ContentType]\n      ,[Pages]\n      ,[Duration]\n      ,[BookBeatPublishDate]\n      ,[BookBeatViewDate]\n      ,[BookBeatUnpublishDate]\n      ,[SerializedApprovals]\n      ,[SerializedMarketRights]\n      ,[SerializedCopyrightOwners]\n  FROM [dbo].[Editions]"
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false
                },
                "inputs": [
                  {
                    "referenceName": "dsSQLBBBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ]
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "folder": {
              "name": "Master Pipelines"
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/datasets/dsSQLBBBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditions')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeZZZAccountsMaster')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1_BooksEditions_From_SQLBB_To_ADL",
                "type": "Copy",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "SqlSource",
                    "sqlReaderQuery": "SELECT [Id]\n      ,[Title]\n      ,[Isbn]\n      ,[Cover]\n      ,[Publisher]\n      ,[PublishDate]\n      ,[Language]\n      ,[CreatedAt]\n      ,[ModifiedAt]\n      ,[DeletedAt]\n      ,[Book_Id]\n      ,[ContentType]\n      ,[Pages]\n      ,[Duration]\n      ,[BookBeatPublishDate]\n      ,[BookBeatViewDate]\n      ,[BookBeatUnpublishDate]\n      ,[SerializedApprovals]\n      ,[SerializedMarketRights]\n      ,[SerializedCopyrightOwners]\n  FROM [dbo].[Editions]"
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false
                },
                "inputs": [
                  {
                    "referenceName": "dsSQLBBBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ]
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "folder": {
              "name": "Master Pipelines"
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/datasets/dsSQLBBBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditions')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeZZZEditionDailySnapshotMaster')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1_BooksEditions_From_SQLBB_To_ADL",
                "type": "Copy",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "SqlSource",
                    "sqlReaderQuery": "SELECT [Id]\n      ,[Title]\n      ,[Isbn]\n      ,[Cover]\n      ,[Publisher]\n      ,[PublishDate]\n      ,[Language]\n      ,[CreatedAt]\n      ,[ModifiedAt]\n      ,[DeletedAt]\n      ,[Book_Id]\n      ,[ContentType]\n      ,[Pages]\n      ,[Duration]\n      ,[BookBeatPublishDate]\n      ,[BookBeatViewDate]\n      ,[BookBeatUnpublishDate]\n      ,[SerializedApprovals]\n      ,[SerializedMarketRights]\n      ,[SerializedCopyrightOwners]\n  FROM [dbo].[Editions]"
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false
                },
                "inputs": [
                  {
                    "referenceName": "dsSQLBBBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ]
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "folder": {
              "name": "Master Pipelines"
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/datasets/dsSQLBBBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditions')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeAutomaticListsGenerate')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1_BooksEditions_From_SQLBB_To_ADL",
                "type": "Copy",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "SqlSource",
                    "sqlReaderQuery": "SELECT [Id]\n      ,[Title]\n      ,[Isbn]\n      ,[Cover]\n      ,[Publisher]\n      ,[PublishDate]\n      ,[Language]\n      ,[CreatedAt]\n      ,[ModifiedAt]\n      ,[DeletedAt]\n      ,[Book_Id]\n      ,[ContentType]\n      ,[Pages]\n      ,[Duration]\n      ,[BookBeatPublishDate]\n      ,[BookBeatViewDate]\n      ,[BookBeatUnpublishDate]\n      ,[SerializedApprovals]\n      ,[SerializedMarketRights]\n      ,[SerializedCopyrightOwners]\n  FROM [dbo].[Editions]"
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false
                },
                "inputs": [
                  {
                    "referenceName": "dsSQLBBBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ]
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "folder": {
              "name": "Master Pipelines"
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/datasets/dsSQLBBBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditions')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeBooksPopularityRankSQLDWToASBlob')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1_BooksEditions_From_SQLBB_To_ADL",
                "type": "Copy",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "SqlSource",
                    "sqlReaderQuery": "SELECT [Id]\n      ,[Title]\n      ,[Isbn]\n      ,[Cover]\n      ,[Publisher]\n      ,[PublishDate]\n      ,[Language]\n      ,[CreatedAt]\n      ,[ModifiedAt]\n      ,[DeletedAt]\n      ,[Book_Id]\n      ,[ContentType]\n      ,[Pages]\n      ,[Duration]\n      ,[BookBeatPublishDate]\n      ,[BookBeatViewDate]\n      ,[BookBeatUnpublishDate]\n      ,[SerializedApprovals]\n      ,[SerializedMarketRights]\n      ,[SerializedCopyrightOwners]\n  FROM [dbo].[Editions]"
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false
                },
                "inputs": [
                  {
                    "referenceName": "dsSQLBBBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ]
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "folder": {
              "name": "Master Pipelines"
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/datasets/dsSQLBBBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditions')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeZZZRevenueMaster')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1_BooksEditions_From_SQLBB_To_ADL",
                "type": "Copy",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "SqlSource",
                    "sqlReaderQuery": "SELECT [Id]\n      ,[Title]\n      ,[Isbn]\n      ,[Cover]\n      ,[Publisher]\n      ,[PublishDate]\n      ,[Language]\n      ,[CreatedAt]\n      ,[ModifiedAt]\n      ,[DeletedAt]\n      ,[Book_Id]\n      ,[ContentType]\n      ,[Pages]\n      ,[Duration]\n      ,[BookBeatPublishDate]\n      ,[BookBeatViewDate]\n      ,[BookBeatUnpublishDate]\n      ,[SerializedApprovals]\n      ,[SerializedMarketRights]\n      ,[SerializedCopyrightOwners]\n  FROM [dbo].[Editions]"
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false
                },
                "inputs": [
                  {
                    "referenceName": "dsSQLBBBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ]
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "folder": {
              "name": "Master Pipelines"
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/datasets/dsSQLBBBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditions')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeZZZOrganizationsMaster')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1_BooksEditions_From_SQLBB_To_ADL",
                "type": "Copy",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "SqlSource",
                    "sqlReaderQuery": "SELECT [Id]\n      ,[Title]\n      ,[Isbn]\n      ,[Cover]\n      ,[Publisher]\n      ,[PublishDate]\n      ,[Language]\n      ,[CreatedAt]\n      ,[ModifiedAt]\n      ,[DeletedAt]\n      ,[Book_Id]\n      ,[ContentType]\n      ,[Pages]\n      ,[Duration]\n      ,[BookBeatPublishDate]\n      ,[BookBeatViewDate]\n      ,[BookBeatUnpublishDate]\n      ,[SerializedApprovals]\n      ,[SerializedMarketRights]\n      ,[SerializedCopyrightOwners]\n  FROM [dbo].[Editions]"
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false
                },
                "inputs": [
                  {
                    "referenceName": "dsSQLBBBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ]
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "folder": {
              "name": "Master Pipelines"
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/datasets/dsSQLBBBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditions')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeZZZAccountsWithDelayMaster')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1_BooksEditions_From_SQLBB_To_ADL",
                "type": "Copy",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "SqlSource",
                    "sqlReaderQuery": "SELECT [Id]\n      ,[Title]\n      ,[Isbn]\n      ,[Cover]\n      ,[Publisher]\n      ,[PublishDate]\n      ,[Language]\n      ,[CreatedAt]\n      ,[ModifiedAt]\n      ,[DeletedAt]\n      ,[Book_Id]\n      ,[ContentType]\n      ,[Pages]\n      ,[Duration]\n      ,[BookBeatPublishDate]\n      ,[BookBeatViewDate]\n      ,[BookBeatUnpublishDate]\n      ,[SerializedApprovals]\n      ,[SerializedMarketRights]\n      ,[SerializedCopyrightOwners]\n  FROM [dbo].[Editions]"
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false
                },
                "inputs": [
                  {
                    "referenceName": "dsSQLBBBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ]
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "folder": {
              "name": "Master Pipelines"
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/datasets/dsSQLBBBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditions')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeZZZUsageConsumptionMaster')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1_BooksEditions_From_SQLBB_To_ADL",
                "type": "Copy",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "SqlSource",
                    "sqlReaderQuery": "SELECT [Id]\n      ,[Title]\n      ,[Isbn]\n      ,[Cover]\n      ,[Publisher]\n      ,[PublishDate]\n      ,[Language]\n      ,[CreatedAt]\n      ,[ModifiedAt]\n      ,[DeletedAt]\n      ,[Book_Id]\n      ,[ContentType]\n      ,[Pages]\n      ,[Duration]\n      ,[BookBeatPublishDate]\n      ,[BookBeatViewDate]\n      ,[BookBeatUnpublishDate]\n      ,[SerializedApprovals]\n      ,[SerializedMarketRights]\n      ,[SerializedCopyrightOwners]\n  FROM [dbo].[Editions]"
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false
                },
                "inputs": [
                  {
                    "referenceName": "dsSQLBBBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ]
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "folder": {
              "name": "Master Pipelines"
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/datasets/dsSQLBBBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditions')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeDefineAppTablesSQLDWStoredProc')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1_BooksEditions_From_SQLBB_To_ADL",
                "type": "Copy",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "SqlSource",
                    "sqlReaderQuery": "SELECT [Id]\n      ,[Title]\n      ,[Isbn]\n      ,[Cover]\n      ,[Publisher]\n      ,[PublishDate]\n      ,[Language]\n      ,[CreatedAt]\n      ,[ModifiedAt]\n      ,[DeletedAt]\n      ,[Book_Id]\n      ,[ContentType]\n      ,[Pages]\n      ,[Duration]\n      ,[BookBeatPublishDate]\n      ,[BookBeatViewDate]\n      ,[BookBeatUnpublishDate]\n      ,[SerializedApprovals]\n      ,[SerializedMarketRights]\n      ,[SerializedCopyrightOwners]\n  FROM [dbo].[Editions]"
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false
                },
                "inputs": [
                  {
                    "referenceName": "dsSQLBBBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ]
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "folder": {
              "name": "Master Pipelines"
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/datasets/dsSQLBBBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditions')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeZZZGiftCardsMaster')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1_BooksEditions_From_SQLBB_To_ADL",
                "type": "Copy",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "SqlSource",
                    "sqlReaderQuery": "SELECT [Id]\n      ,[Title]\n      ,[Isbn]\n      ,[Cover]\n      ,[Publisher]\n      ,[PublishDate]\n      ,[Language]\n      ,[CreatedAt]\n      ,[ModifiedAt]\n      ,[DeletedAt]\n      ,[Book_Id]\n      ,[ContentType]\n      ,[Pages]\n      ,[Duration]\n      ,[BookBeatPublishDate]\n      ,[BookBeatViewDate]\n      ,[BookBeatUnpublishDate]\n      ,[SerializedApprovals]\n      ,[SerializedMarketRights]\n      ,[SerializedCopyrightOwners]\n  FROM [dbo].[Editions]"
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false
                },
                "inputs": [
                  {
                    "referenceName": "dsSQLBBBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ]
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "folder": {
              "name": "Master Pipelines"
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/datasets/dsSQLBBBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditions')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeModelRefreshers')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1_BooksEditions_From_SQLBB_To_ADL",
                "type": "Copy",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "SqlSource",
                    "sqlReaderQuery": "SELECT [Id]\n      ,[Title]\n      ,[Isbn]\n      ,[Cover]\n      ,[Publisher]\n      ,[PublishDate]\n      ,[Language]\n      ,[CreatedAt]\n      ,[ModifiedAt]\n      ,[DeletedAt]\n      ,[Book_Id]\n      ,[ContentType]\n      ,[Pages]\n      ,[Duration]\n      ,[BookBeatPublishDate]\n      ,[BookBeatViewDate]\n      ,[BookBeatUnpublishDate]\n      ,[SerializedApprovals]\n      ,[SerializedMarketRights]\n      ,[SerializedCopyrightOwners]\n  FROM [dbo].[Editions]"
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false
                },
                "inputs": [
                  {
                    "referenceName": "dsSQLBBBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ]
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "folder": {
              "name": "Master Pipelines"
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/datasets/dsSQLBBBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditions')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeZZZInternalMaster')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1_BooksEditions_From_SQLBB_To_ADL",
                "type": "Copy",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "SqlSource",
                    "sqlReaderQuery": "SELECT [Id]\n      ,[Title]\n      ,[Isbn]\n      ,[Cover]\n      ,[Publisher]\n      ,[PublishDate]\n      ,[Language]\n      ,[CreatedAt]\n      ,[ModifiedAt]\n      ,[DeletedAt]\n      ,[Book_Id]\n      ,[ContentType]\n      ,[Pages]\n      ,[Duration]\n      ,[BookBeatPublishDate]\n      ,[BookBeatViewDate]\n      ,[BookBeatUnpublishDate]\n      ,[SerializedApprovals]\n      ,[SerializedMarketRights]\n      ,[SerializedCopyrightOwners]\n  FROM [dbo].[Editions]"
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false
                },
                "inputs": [
                  {
                    "referenceName": "dsSQLBBBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ]
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "folder": {
              "name": "Master Pipelines"
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/datasets/dsSQLBBBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditions')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeZZZUsersMaster')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1_BooksEditions_From_SQLBB_To_ADL",
                "type": "Copy",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "SqlSource",
                    "sqlReaderQuery": "SELECT [Id]\n      ,[Title]\n      ,[Isbn]\n      ,[Cover]\n      ,[Publisher]\n      ,[PublishDate]\n      ,[Language]\n      ,[CreatedAt]\n      ,[ModifiedAt]\n      ,[DeletedAt]\n      ,[Book_Id]\n      ,[ContentType]\n      ,[Pages]\n      ,[Duration]\n      ,[BookBeatPublishDate]\n      ,[BookBeatViewDate]\n      ,[BookBeatUnpublishDate]\n      ,[SerializedApprovals]\n      ,[SerializedMarketRights]\n      ,[SerializedCopyrightOwners]\n  FROM [dbo].[Editions]"
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false
                },
                "inputs": [
                  {
                    "referenceName": "dsSQLBBBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ]
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "folder": {
              "name": "Master Pipelines"
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/datasets/dsSQLBBBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditions')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeZZZPricingMaster')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1_BooksEditions_From_SQLBB_To_ADL",
                "type": "Copy",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "SqlSource",
                    "sqlReaderQuery": "SELECT [Id]\n      ,[Title]\n      ,[Isbn]\n      ,[Cover]\n      ,[Publisher]\n      ,[PublishDate]\n      ,[Language]\n      ,[CreatedAt]\n      ,[ModifiedAt]\n      ,[DeletedAt]\n      ,[Book_Id]\n      ,[ContentType]\n      ,[Pages]\n      ,[Duration]\n      ,[BookBeatPublishDate]\n      ,[BookBeatViewDate]\n      ,[BookBeatUnpublishDate]\n      ,[SerializedApprovals]\n      ,[SerializedMarketRights]\n      ,[SerializedCopyrightOwners]\n  FROM [dbo].[Editions]"
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false
                },
                "inputs": [
                  {
                    "referenceName": "dsSQLBBBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ]
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "folder": {
              "name": "Master Pipelines"
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/datasets/dsSQLBBBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditions')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeDataQualityControls')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1_BooksEditions_From_SQLBB_To_ADL",
                "type": "Copy",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "SqlSource",
                    "sqlReaderQuery": "SELECT [Id]\n      ,[Title]\n      ,[Isbn]\n      ,[Cover]\n      ,[Publisher]\n      ,[PublishDate]\n      ,[Language]\n      ,[CreatedAt]\n      ,[ModifiedAt]\n      ,[DeletedAt]\n      ,[Book_Id]\n      ,[ContentType]\n      ,[Pages]\n      ,[Duration]\n      ,[BookBeatPublishDate]\n      ,[BookBeatViewDate]\n      ,[BookBeatUnpublishDate]\n      ,[SerializedApprovals]\n      ,[SerializedMarketRights]\n      ,[SerializedCopyrightOwners]\n  FROM [dbo].[Editions]"
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false
                },
                "inputs": [
                  {
                    "referenceName": "dsSQLBBBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ]
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "folder": {
              "name": "Master Pipelines"
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/datasets/dsSQLBBBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditions')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeZZZCategoriesMaster')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1_BooksEditions_From_SQLBB_To_ADL",
                "type": "Copy",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "SqlSource",
                    "sqlReaderQuery": "SELECT [Id]\n      ,[Title]\n      ,[Isbn]\n      ,[Cover]\n      ,[Publisher]\n      ,[PublishDate]\n      ,[Language]\n      ,[CreatedAt]\n      ,[ModifiedAt]\n      ,[DeletedAt]\n      ,[Book_Id]\n      ,[ContentType]\n      ,[Pages]\n      ,[Duration]\n      ,[BookBeatPublishDate]\n      ,[BookBeatViewDate]\n      ,[BookBeatUnpublishDate]\n      ,[SerializedApprovals]\n      ,[SerializedMarketRights]\n      ,[SerializedCopyrightOwners]\n  FROM [dbo].[Editions]"
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false
                },
                "inputs": [
                  {
                    "referenceName": "dsSQLBBBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ]
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "folder": {
              "name": "Master Pipelines"
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/datasets/dsSQLBBBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditions')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeZZZMetadataMaster')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1_BooksEditions_From_SQLBB_To_ADL",
                "type": "Copy",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "SqlSource",
                    "sqlReaderQuery": "SELECT [Id]\n      ,[Title]\n      ,[Isbn]\n      ,[Cover]\n      ,[Publisher]\n      ,[PublishDate]\n      ,[Language]\n      ,[CreatedAt]\n      ,[ModifiedAt]\n      ,[DeletedAt]\n      ,[Book_Id]\n      ,[ContentType]\n      ,[Pages]\n      ,[Duration]\n      ,[BookBeatPublishDate]\n      ,[BookBeatViewDate]\n      ,[BookBeatUnpublishDate]\n      ,[SerializedApprovals]\n      ,[SerializedMarketRights]\n      ,[SerializedCopyrightOwners]\n  FROM [dbo].[Editions]"
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false
                },
                "inputs": [
                  {
                    "referenceName": "dsSQLBBBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ]
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "folder": {
              "name": "Master Pipelines"
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/datasets/dsSQLBBBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditions')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeZZZReadingsDailyMaster')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1_BooksEditions_From_SQLBB_To_ADL",
                "type": "Copy",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "SqlSource",
                    "sqlReaderQuery": "SELECT [Id]\n      ,[Title]\n      ,[Isbn]\n      ,[Cover]\n      ,[Publisher]\n      ,[PublishDate]\n      ,[Language]\n      ,[CreatedAt]\n      ,[ModifiedAt]\n      ,[DeletedAt]\n      ,[Book_Id]\n      ,[ContentType]\n      ,[Pages]\n      ,[Duration]\n      ,[BookBeatPublishDate]\n      ,[BookBeatViewDate]\n      ,[BookBeatUnpublishDate]\n      ,[SerializedApprovals]\n      ,[SerializedMarketRights]\n      ,[SerializedCopyrightOwners]\n  FROM [dbo].[Editions]"
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false
                },
                "inputs": [
                  {
                    "referenceName": "dsSQLBBBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ]
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "folder": {
              "name": "Master Pipelines"
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/datasets/dsSQLBBBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditions')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeMailchimpUploadDatabricks')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1_BooksEditions_From_SQLBB_To_ADL",
                "type": "Copy",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "SqlSource",
                    "sqlReaderQuery": "SELECT [Id]\n      ,[Title]\n      ,[Isbn]\n      ,[Cover]\n      ,[Publisher]\n      ,[PublishDate]\n      ,[Language]\n      ,[CreatedAt]\n      ,[ModifiedAt]\n      ,[DeletedAt]\n      ,[Book_Id]\n      ,[ContentType]\n      ,[Pages]\n      ,[Duration]\n      ,[BookBeatPublishDate]\n      ,[BookBeatViewDate]\n      ,[BookBeatUnpublishDate]\n      ,[SerializedApprovals]\n      ,[SerializedMarketRights]\n      ,[SerializedCopyrightOwners]\n  FROM [dbo].[Editions]"
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false
                },
                "inputs": [
                  {
                    "referenceName": "dsSQLBBBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ]
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "folder": {
              "name": "Master Pipelines"
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/datasets/dsSQLBBBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditions')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeZZZEventLogDailyMaster')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1_BooksEditions_From_SQLBB_To_ADL",
                "type": "Copy",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "SqlSource",
                    "sqlReaderQuery": "SELECT [Id]\n      ,[Title]\n      ,[Isbn]\n      ,[Cover]\n      ,[Publisher]\n      ,[PublishDate]\n      ,[Language]\n      ,[CreatedAt]\n      ,[ModifiedAt]\n      ,[DeletedAt]\n      ,[Book_Id]\n      ,[ContentType]\n      ,[Pages]\n      ,[Duration]\n      ,[BookBeatPublishDate]\n      ,[BookBeatViewDate]\n      ,[BookBeatUnpublishDate]\n      ,[SerializedApprovals]\n      ,[SerializedMarketRights]\n      ,[SerializedCopyrightOwners]\n  FROM [dbo].[Editions]"
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false
                },
                "inputs": [
                  {
                    "referenceName": "dsSQLBBBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ]
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "folder": {
              "name": "Master Pipelines"
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/datasets/dsSQLBBBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditions')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeZZZListsMaster')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1_BooksEditions_From_SQLBB_To_ADL",
                "type": "Copy",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "SqlSource",
                    "sqlReaderQuery": "SELECT [Id]\n      ,[Title]\n      ,[Isbn]\n      ,[Cover]\n      ,[Publisher]\n      ,[PublishDate]\n      ,[Language]\n      ,[CreatedAt]\n      ,[ModifiedAt]\n      ,[DeletedAt]\n      ,[Book_Id]\n      ,[ContentType]\n      ,[Pages]\n      ,[Duration]\n      ,[BookBeatPublishDate]\n      ,[BookBeatViewDate]\n      ,[BookBeatUnpublishDate]\n      ,[SerializedApprovals]\n      ,[SerializedMarketRights]\n      ,[SerializedCopyrightOwners]\n  FROM [dbo].[Editions]"
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false
                },
                "inputs": [
                  {
                    "referenceName": "dsSQLBBBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ]
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "folder": {
              "name": "Master Pipelines"
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/datasets/dsSQLBBBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditions')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeZZZManualMaster')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1_BooksEditions_From_SQLBB_To_ADL",
                "type": "Copy",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "SqlSource",
                    "sqlReaderQuery": "SELECT [Id]\n      ,[Title]\n      ,[Isbn]\n      ,[Cover]\n      ,[Publisher]\n      ,[PublishDate]\n      ,[Language]\n      ,[CreatedAt]\n      ,[ModifiedAt]\n      ,[DeletedAt]\n      ,[Book_Id]\n      ,[ContentType]\n      ,[Pages]\n      ,[Duration]\n      ,[BookBeatPublishDate]\n      ,[BookBeatViewDate]\n      ,[BookBeatUnpublishDate]\n      ,[SerializedApprovals]\n      ,[SerializedMarketRights]\n      ,[SerializedCopyrightOwners]\n  FROM [dbo].[Editions]"
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false
                },
                "inputs": [
                  {
                    "referenceName": "dsSQLBBBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ]
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "folder": {
              "name": "Master Pipelines"
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/datasets/dsSQLBBBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditions')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeZZZDistributionMaster')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1_BooksEditions_From_SQLBB_To_ADL",
                "type": "Copy",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "SqlSource",
                    "sqlReaderQuery": "SELECT [Id]\n      ,[Title]\n      ,[Isbn]\n      ,[Cover]\n      ,[Publisher]\n      ,[PublishDate]\n      ,[Language]\n      ,[CreatedAt]\n      ,[ModifiedAt]\n      ,[DeletedAt]\n      ,[Book_Id]\n      ,[ContentType]\n      ,[Pages]\n      ,[Duration]\n      ,[BookBeatPublishDate]\n      ,[BookBeatViewDate]\n      ,[BookBeatUnpublishDate]\n      ,[SerializedApprovals]\n      ,[SerializedMarketRights]\n      ,[SerializedCopyrightOwners]\n  FROM [dbo].[Editions]"
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false
                },
                "inputs": [
                  {
                    "referenceName": "dsSQLBBBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ]
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "folder": {
              "name": "Master Pipelines"
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/datasets/dsSQLBBBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditions')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeZZZUserSnapshotMaster')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1_BooksEditions_From_SQLBB_To_ADL",
                "type": "Copy",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "SqlSource",
                    "sqlReaderQuery": "SELECT [Id]\n      ,[Title]\n      ,[Isbn]\n      ,[Cover]\n      ,[Publisher]\n      ,[PublishDate]\n      ,[Language]\n      ,[CreatedAt]\n      ,[ModifiedAt]\n      ,[DeletedAt]\n      ,[Book_Id]\n      ,[ContentType]\n      ,[Pages]\n      ,[Duration]\n      ,[BookBeatPublishDate]\n      ,[BookBeatViewDate]\n      ,[BookBeatUnpublishDate]\n      ,[SerializedApprovals]\n      ,[SerializedMarketRights]\n      ,[SerializedCopyrightOwners]\n  FROM [dbo].[Editions]"
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false
                },
                "inputs": [
                  {
                    "referenceName": "dsSQLBBBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ]
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "folder": {
              "name": "Master Pipelines"
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/datasets/dsSQLBBBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditions')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeZZZSettlementsMaster')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1_BooksEditions_From_SQLBB_To_ADL",
                "type": "Copy",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "SqlSource",
                    "sqlReaderQuery": "SELECT [Id]\n      ,[Title]\n      ,[Isbn]\n      ,[Cover]\n      ,[Publisher]\n      ,[PublishDate]\n      ,[Language]\n      ,[CreatedAt]\n      ,[ModifiedAt]\n      ,[DeletedAt]\n      ,[Book_Id]\n      ,[ContentType]\n      ,[Pages]\n      ,[Duration]\n      ,[BookBeatPublishDate]\n      ,[BookBeatViewDate]\n      ,[BookBeatUnpublishDate]\n      ,[SerializedApprovals]\n      ,[SerializedMarketRights]\n      ,[SerializedCopyrightOwners]\n  FROM [dbo].[Editions]"
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false
                },
                "inputs": [
                  {
                    "referenceName": "dsSQLBBBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ]
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "folder": {
              "name": "Master Pipelines"
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/datasets/dsSQLBBBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditions')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeZZZMailchimpMaster')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "1_BooksEditions_From_SQLBB_To_ADL",
                "type": "Copy",
                "dependsOn": [],
                "policy": {
                  "timeout": "00:20:00",
                  "retry": 2,
                  "retryIntervalInSeconds": 600
                },
                "userProperties": [],
                "typeProperties": {
                  "source": {
                    "type": "SqlSource",
                    "sqlReaderQuery": "SELECT [Id]\n      ,[Title]\n      ,[Isbn]\n      ,[Cover]\n      ,[Publisher]\n      ,[PublishDate]\n      ,[Language]\n      ,[CreatedAt]\n      ,[ModifiedAt]\n      ,[DeletedAt]\n      ,[Book_Id]\n      ,[ContentType]\n      ,[Pages]\n      ,[Duration]\n      ,[BookBeatPublishDate]\n      ,[BookBeatViewDate]\n      ,[BookBeatUnpublishDate]\n      ,[SerializedApprovals]\n      ,[SerializedMarketRights]\n      ,[SerializedCopyrightOwners]\n  FROM [dbo].[Editions]"
                  },
                  "sink": {
                    "type": "AzureDataLakeStoreSink",
                    "writeBatchSize": 0,
                    "writeBatchTimeout": "00:00:00"
                  },
                  "enableStaging": false
                },
                "inputs": [
                  {
                    "referenceName": "dsSQLBBBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {}
                  }
                ],
                "outputs": [
                  {
                    "referenceName": "dsADLBooksEditions",
                    "type": "DatasetReference",
                    "parameters": {
                      "WindowStart": {
                        "value": "@pipeline().parameters.WindowStart",
                        "type": "Expression"
                      }
                    }
                  }
                ]
              }
            ],
            "parameters": {
              "WindowEnd": {
                "type": "String"
              },
              "WindowStart": {
                "type": "String"
              }
            },
            "folder": {
              "name": "Master Pipelines"
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/datasets/dsSQLBBBooksEditions')]",
            "[concat(variables('factoryId'), '/datasets/dsADLBooksEditions')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/pipeZZZZDailyMaster')]",
          "type": "Microsoft.DataFactory/factories/pipelines",
          "apiVersion": "2018-06-01",
          "properties": {
            "activities": [
              {
                "name": "102-pipeZZZAccountsMaster",
                "type": "ExecutePipeline",
                "dependsOn": [],
                "userProperties": [],
                "typeProperties": {
                  "pipeline": {
                    "referenceName": "pipeZZZAccountsMaster",
                    "type": "PipelineReference"
                  },
                  "waitOnCompletion": true,
                  "parameters": {
                    "WindowStart": {
                      "value": "@pipeline().parameters.WindowStart",
                      "type": "Expression"
                    },
                    "WindowEnd": {
                      "value": "@pipeline().parameters.WindowEnd",
                      "type": "Expression"
                    }
                  }
                }
              },
              {
                "name": "103-pipeZZZAccountsWithDelayMaster",
                "type": "ExecutePipeline",
                "dependsOn": [],
                "userProperties": [],
                "typeProperties": {
                  "pipeline": {
                    "referenceName": "pipeZZZAccountsWithDelayMaster",
                    "type": "PipelineReference"
                  },
                  "waitOnCompletion": true,
                  "parameters": {
                    "WindowStart": {
                      "value": "@pipeline().parameters.WindowStart",
                      "type": "Expression"
                    },
                    "WindowEnd": {
                      "value": "@pipeline().parameters.WindowEnd",
                      "type": "Expression"
                    }
                  }
                }
              },
              {
                "name": "104-pipeZZZGiftCardsMaster",
                "type": "ExecutePipeline",
                "dependsOn": [
                  {
                    "activity": "102-pipeZZZAccountsMaster",
                    "dependencyConditions": [
                      "Succeeded"
                    ]
                  }
                ],
                "userProperties": [],
                "typeProperties": {
                  "pipeline": {
                    "referenceName": "pipeZZZGiftCardsMaster",
                    "type": "PipelineReference"
                  },
                  "waitOnCompletion": true,
                  "parameters": {
                    "WindowStart": {
                      "value": "@pipeline().parameters.WindowStart",
                      "type": "Expression"
                    },
                    "WindowEnd": {
                      "value": "@pipeline().parameters.WindowEnd",
                      "type": "Expression"
                    }
                  }
                }
              },
              {
                "name": "105-pipeZZZBooksMaster",
                "type": "ExecutePipeline",
                "dependsOn": [],
                "userProperties": [],
                "typeProperties": {
                  "pipeline": {
                    "referenceName": "pipeZZZBooksMaster",
                    "type": "PipelineReference"
                  },
                  "waitOnCompletion": true,
                  "parameters": {
                    "WindowStart": {
                      "value": "@pipeline().parameters.WindowStart",
                      "type": "Expression"
                    },
                    "WindowEnd": {
                      "value": "@pipeline().parameters.WindowEnd",
                      "type": "Expression"
                    }
                  }
                }
              },
              {
                "name": "106-pipeZZZDistributionMaster",
                "type": "ExecutePipeline",
                "dependsOn": [],
                "userProperties": [],
                "typeProperties": {
                  "pipeline": {
                    "referenceName": "pipeZZZDistributionMaster",
                    "type": "PipelineReference"
                  },
                  "waitOnCompletion": true,
                  "parameters": {
                    "WindowStart": {
                      "value": "@pipeline().parameters.WindowStart",
                      "type": "Expression"
                    },
                    "WindowEnd": {
                      "value": "@pipeline().parameters.WindowEnd",
                      "type": "Expression"
                    }
                  }
                }
              },
              {
                "name": "107-pipeZZZReadingsDailyMaster",
                "type": "ExecutePipeline",
                "dependsOn": [
                  {
                    "activity": "114-pipeZZZOrganizationsMaster",
                    "dependencyConditions": [
                      "Succeeded"
                    ]
                  }
                ],
                "userProperties": [],
                "typeProperties": {
                  "pipeline": {
                    "referenceName": "pipeZZZReadingsDailyMaster",
                    "type": "PipelineReference"
                  },
                  "waitOnCompletion": true,
                  "parameters": {
                    "WindowStart": {
                      "value": "@pipeline().parameters.WindowStart",
                      "type": "Expression"
                    },
                    "WindowEnd": {
                      "value": "@pipeline().parameters.WindowEnd",
                      "type": "Expression"
                    }
                  }
                }
              },
              {
                "name": "108-pipeZZZSettlementsMaster",
                "type": "ExecutePipeline",
                "dependsOn": [],
                "userProperties": [],
                "typeProperties": {
                  "pipeline": {
                    "referenceName": "pipeZZZSettlementsMaster",
                    "type": "PipelineReference"
                  },
                  "waitOnCompletion": true,
                  "parameters": {
                    "WindowStart": {
                      "value": "@pipeline().parameters.WindowStart",
                      "type": "Expression"
                    },
                    "WindowEnd": {
                      "value": "@pipeline().parameters.WindowEnd",
                      "type": "Expression"
                    }
                  }
                }
              },
              {
                "name": "109-pipeZZZUsersMaster",
                "type": "ExecutePipeline",
                "dependsOn": [],
                "userProperties": [],
                "typeProperties": {
                  "pipeline": {
                    "referenceName": "pipeZZZUsersMaster",
                    "type": "PipelineReference"
                  },
                  "waitOnCompletion": true,
                  "parameters": {
                    "WindowStart": {
                      "value": "@pipeline().parameters.WindowStart",
                      "type": "Expression"
                    },
                    "WindowEnd": {
                      "value": "@pipeline().parameters.WindowEnd",
                      "type": "Expression"
                    }
                  }
                }
              },
              {
                "name": "110-pipeZZZPricingMaster",
                "type": "ExecutePipeline",
                "dependsOn": [],
                "userProperties": [],
                "typeProperties": {
                  "pipeline": {
                    "referenceName": "pipeZZZPricingMaster",
                    "type": "PipelineReference"
                  },
                  "waitOnCompletion": true,
                  "parameters": {
                    "WindowStart": {
                      "value": "@pipeline().parameters.WindowStart",
                      "type": "Expression"
                    },
                    "WindowEnd": {
                      "value": "@pipeline().parameters.WindowEnd",
                      "type": "Expression"
                    }
                  }
                }
              },
              {
                "name": "201-pipeZZZCategoriesMaster",
                "type": "ExecutePipeline",
                "dependsOn": [
                  {
                    "activity": "105-pipeZZZBooksMaster",
                    "dependencyConditions": [
                      "Succeeded"
                    ]
                  }
                ],
                "userProperties": [],
                "typeProperties": {
                  "pipeline": {
                    "referenceName": "pipeZZZCategoriesMaster",
                    "type": "PipelineReference"
                  },
                  "waitOnCompletion": true,
                  "parameters": {
                    "WindowStart": {
                      "value": "@pipeline().parameters.WindowStart",
                      "type": "Expression"
                    },
                    "WindowEnd": {
                      "value": "@pipeline().parameters.WindowEnd",
                      "type": "Expression"
                    }
                  }
                }
              },
              {
                "name": "112-pipeZZZAppViewsMaster",
                "type": "ExecutePipeline",
                "dependsOn": [],
                "userProperties": [],
                "typeProperties": {
                  "pipeline": {
                    "referenceName": "pipeZZZAppViewsMaster",
                    "type": "PipelineReference"
                  },
                  "waitOnCompletion": true,
                  "parameters": {
                    "WindowStart": {
                      "value": "@pipeline().parameters.WindowStart",
                      "type": "Expression"
                    },
                    "WindowEnd": {
                      "value": "@pipeline().parameters.WindowEnd",
                      "type": "Expression"
                    }
                  }
                }
              },
              {
                "name": "113-pipeZZZListsMaster",
                "type": "ExecutePipeline",
                "dependsOn": [
                  {
                    "activity": "101-pipeZZZMailchimpMaster",
                    "dependencyConditions": [
                      "Succeeded"
                    ]
                  }
                ],
                "userProperties": [],
                "typeProperties": {
                  "pipeline": {
                    "referenceName": "pipeZZZListsMaster",
                    "type": "PipelineReference"
                  },
                  "waitOnCompletion": true,
                  "parameters": {
                    "WindowStart": {
                      "value": "@pipeline().parameters.WindowStart",
                      "type": "Expression"
                    },
                    "WindowEnd": {
                      "value": "@pipeline().parameters.WindowEnd",
                      "type": "Expression"
                    }
                  }
                }
              },
              {
                "name": "101-pipeZZZMailchimpMaster",
                "type": "ExecutePipeline",
                "dependsOn": [],
                "userProperties": [],
                "typeProperties": {
                  "pipeline": {
                    "referenceName": "pipeZZZMailchimpMaster",
                    "type": "PipelineReference"
                  },
                  "waitOnCompletion": true,
                  "parameters": {
                    "WindowStart": {
                      "value": "@pipeline().parameters.WindowStart",
                      "type": "Expression"
                    },
                    "WindowEnd": {
                      "value": "@pipeline().parameters.WindowEnd",
                      "type": "Expression"
                    }
                  }
                }
              },
              {
                "name": "114-pipeZZZOrganizationsMaster",
                "type": "ExecutePipeline",
                "dependsOn": [],
                "userProperties": [],
                "typeProperties": {
                  "pipeline": {
                    "referenceName": "pipeZZZOrganizationsMaster",
                    "type": "PipelineReference"
                  },
                  "waitOnCompletion": true,
                  "parameters": {
                    "WindowStart": {
                      "value": "@pipeline().parameters.WindowStart",
                      "type": "Expression"
                    },
                    "WindowEnd": {
                      "value": "@pipeline().parameters.WindowEnd",
                      "type": "Expression"
                    }
                  }
                }
              },
              {
                "name": "202-pipeZZZRevenueMaster",
                "type": "ExecutePipeline",
                "dependsOn": [
                  {
                    "activity": "103-pipeZZZAccountsWithDelayMaster",
                    "dependencyConditions": [
                      "Succeeded"
                    ]
                  },
                  {
                    "activity": "104-pipeZZZGiftCardsMaster",
                    "dependencyConditions": [
                      "Succeeded"
                    ]
                  }
                ],
                "userProperties": [],
                "typeProperties": {
                  "pipeline": {
                    "referenceName": "pipeZZZRevenueMaster",
                    "type": "PipelineReference"
                  },
                  "waitOnCompletion": true,
                  "parameters": {
                    "WindowStart": {
                      "value": "@pipeline().parameters.WindowStart",
                      "type": "Expression"
                    },
                    "WindowEnd": {
                      "value": "@pipeline().parameters.WindowEnd",
                      "type": "Expression"
                    }
                  }
                }
              },
              {
                "name": "402-pipeZZZUsageConsumptionMaster",
                "type": "ExecutePipeline",
                "dependsOn": [
                  {
                    "activity": "301-pipeZZZInternalMaster",
                    "dependencyConditions": [
                      "Succeeded"
                    ]
                  }
                ],
                "userProperties": [],
                "typeProperties": {
                  "pipeline": {
                    "referenceName": "pipeZZZUsageConsumptionMaster",
                    "type": "PipelineReference"
                  },
                  "waitOnCompletion": true,
                  "parameters": {
                    "WindowStart": {
                      "value": "@pipeline().parameters.WindowStart",
                      "type": "Expression"
                    },
                    "WindowEnd": {
                      "value": "@pipeline().parameters.WindowEnd",
                      "type": "Expression"
                    }
                  }
                }
              },
              {
                "name": "501-pipeZZZUserSnapshotMaster",
                "type": "ExecutePipeline",
                "dependsOn": [
                  {
                    "activity": "402-pipeZZZUsageConsumptionMaster",
                    "dependencyConditions": [
                      "Succeeded"
                    ]
                  }
                ],
                "userProperties": [],
                "typeProperties": {
                  "pipeline": {
                    "referenceName": "pipeZZZUserSnapshotMaster",
                    "type": "PipelineReference"
                  },
                  "waitOnCompletion": true,
                  "parameters": {
                    "WindowStart": {
                      "value": "@pipeline().parameters.WindowStart",
                      "type": "Expression"
                    },
                    "WindowEnd": {
                      "value": "@pipeline().parameters.WindowEnd",
                      "type": "Expression"
                    }
                  }
                }
              },
              {
                "name": "601-pipeDefineAppTables",
                "type": "ExecutePipeline",
                "dependsOn": [
                  {
                    "activity": "501-pipeZZZUserSnapshotMaster",
                    "dependencyConditions": [
                      "Succeeded"
                    ]
                  }
                ],
                "userProperties": [],
                "typeProperties": {
                  "pipeline": {
                    "referenceName": "pipeDefineAppTablesSQLDWStoredProc",
                    "type": "PipelineReference"
                  },
                  "waitOnCompletion": true,
                  "parameters": {
                    "WindowStart": {
                      "value": "@pipeline().parameters.WindowStart",
                      "type": "Expression"
                    },
                    "WindowEnd": {
                      "value": "@pipeline().parameters.WindowEnd",
                      "type": "Expression"
                    }
                  }
                }
              },
              {
                "name": "301-pipeZZZInternalMaster",
                "type": "ExecutePipeline",
                "dependsOn": [
                  {
                    "activity": "201-pipeZZZCategoriesMaster",
                    "dependencyConditions": [
                      "Succeeded"
                    ]
                  },
                  {
                    "activity": "110-pipeZZZPricingMaster",
                    "dependencyConditions": [
                      "Succeeded"
                    ]
                  },
                  {
                    "activity": "108-pipeZZZSettlementsMaster",
                    "dependencyConditions": [
                      "Succeeded"
                    ]
                  },
                  {
                    "activity": "107-pipeZZZReadingsDailyMaster",
                    "dependencyConditions": [
                      "Succeeded"
                    ]
                  },
                  {
                    "activity": "106-pipeZZZDistributionMaster",
                    "dependencyConditions": [
                      "Succeeded"
                    ]
                  },
                  {
                    "activity": "109-pipeZZZUsersMaster",
                    "dependencyConditions": [
                      "Succeeded"
                    ]
                  },
                  {
                    "activity": "104-pipeZZZGiftCardsMaster",
                    "dependencyConditions": [
                      "Succeeded"
                    ]
                  },
                  {
                    "activity": "103-pipeZZZAccountsWithDelayMaster",
                    "dependencyConditions": [
                      "Succeeded"
                    ]
                  },
                  {
                    "activity": "116-pipeZZZEventLogDailyMaster",
                    "dependencyConditions": [
                      "Succeeded"
                    ]
                  },
                  {
                    "activity": "111-pipeZZZManualMaster",
                    "dependencyConditions": [
                      "Succeeded"
                    ]
                  },
                  {
                    "activity": "112-pipeZZZMetadataMaster",
                    "dependencyConditions": [
                      "Succeeded"
                    ]
                  }
                ],
                "userProperties": [],
                "typeProperties": {
                  "pipeline": {
                    "referenceName": "pipeZZZInternalMaster",
                    "type": "PipelineReference"
                  },
                  "waitOnCompletion": true,
                  "parameters": {
                    "WindowStart": {
                      "value": "@pipeline().parameters.WindowStart",
                      "type": "Expression"
                    },
                    "WindowEnd": {
                      "value": "@pipeline().parameters.WindowEnd",
                      "type": "Expression"
                    }
                  }
                }
              },
              {
                "name": "115-pipeBooksPopularityRank",
                "type": "ExecutePipeline",
                "dependsOn": [],
                "userProperties": [],
                "typeProperties": {
                  "pipeline": {
                    "referenceName": "pipeBooksPopularityRankSQLDWToASBlob",
                    "type": "PipelineReference"
                  },
                  "waitOnCompletion": true,
                  "parameters": {
                    "WindowStart": {
                      "value": "@pipeline().parameters.WindowStart",
                      "type": "Expression"
                    }
                  }
                }
              },
              {
                "name": "401-pipeMailchimpUpload",
                "type": "ExecutePipeline",
                "dependsOn": [
                  {
                    "activity": "301-pipeZZZInternalMaster",
                    "dependencyConditions": [
                      "Succeeded"
                    ]
                  }
                ],
                "userProperties": [],
                "typeProperties": {
                  "pipeline": {
                    "referenceName": "pipeMailchimpUploadDatabricks",
                    "type": "PipelineReference"
                  },
                  "waitOnCompletion": true,
                  "parameters": {}
                }
              },
              {
                "name": "116-pipeZZZEventLogDailyMaster",
                "type": "ExecutePipeline",
                "dependsOn": [
                  {
                    "activity": "102-pipeZZZAccountsMaster",
                    "dependencyConditions": [
                      "Succeeded"
                    ]
                  }
                ],
                "userProperties": [],
                "typeProperties": {
                  "pipeline": {
                    "referenceName": "pipeZZZEventLogDailyMaster",
                    "type": "PipelineReference"
                  },
                  "waitOnCompletion": true,
                  "parameters": {
                    "WindowStart": {
                      "value": "@pipeline().parameters.WindowStart",
                      "type": "Expression"
                    },
                    "WindowEnd": {
                      "value": "@pipeline().parameters.WindowEnd",
                      "type": "Expression"
                    }
                  }
                }
              },
              {
                "name": "801-pipeAutomaticListsGenerate",
                "type": "ExecutePipeline",
                "dependsOn": [
                  {
                    "activity": "702-pipeModelRefreshers",
                    "dependencyConditions": [
                      "Succeeded"
                    ]
                  }
                ],
                "userProperties": [],
                "typeProperties": {
                  "pipeline": {
                    "referenceName": "pipeAutomaticListsGenerate",
                    "type": "PipelineReference"
                  },
                  "waitOnCompletion": true,
                  "parameters": {
                    "ExternalExport": "ExportAutomaticLists",
                    "WindowStart": {
                      "value": "@pipeline().parameters.WindowStart",
                      "type": "Expression"
                    },
                    "Force": "false"
                  }
                }
              },
              {
                "name": "701-pipeZZZEditionDailySnapshotMaster",
                "type": "ExecutePipeline",
                "dependsOn": [
                  {
                    "activity": "601-pipeDefineAppTables",
                    "dependencyConditions": [
                      "Succeeded"
                    ]
                  }
                ],
                "userProperties": [],
                "typeProperties": {
                  "pipeline": {
                    "referenceName": "pipeZZZEditionDailySnapshotMaster",
                    "type": "PipelineReference"
                  },
                  "waitOnCompletion": true,
                  "parameters": {
                    "WindowStart": {
                      "value": "@pipeline().parameters.WindowStart",
                      "type": "Expression"
                    },
                    "WindowEnd": {
                      "value": "@pipeline().parameters.WindowEnd",
                      "type": "Expression"
                    }
                  }
                }
              },
              {
                "name": "111-pipeZZZManualMaster",
                "type": "ExecutePipeline",
                "dependsOn": [],
                "userProperties": [],
                "typeProperties": {
                  "pipeline": {
                    "referenceName": "pipeZZZManualMaster",
                    "type": "PipelineReference"
                  },
                  "waitOnCompletion": true,
                  "parameters": {
                    "WindowStart": {
                      "value": "@pipeline().parameters.WindowStart",
                      "type": "Expression"
                    },
                    "WindowEnd": {
                      "value": "@pipeline().parameters.WindowEnd",
                      "type": "Expression"
                    }
                  }
                }
              },
              {
                "name": "999-pipeDataQualityTests",
                "type": "ExecutePipeline",
                "dependsOn": [
                  {
                    "activity": "202-pipeZZZRevenueMaster",
                    "dependencyConditions": [
                      "Completed"
                    ]
                  },
                  {
                    "activity": "401-pipeMailchimpUpload",
                    "dependencyConditions": [
                      "Completed"
                    ]
                  },
                  {
                    "activity": "801-pipeAutomaticListsGenerate",
                    "dependencyConditions": [
                      "Completed"
                    ]
                  },
                  {
                    "activity": "113-pipeZZZListsMaster",
                    "dependencyConditions": [
                      "Completed"
                    ]
                  },
                  {
                    "activity": "112-pipeZZZAppViewsMaster",
                    "dependencyConditions": [
                      "Completed"
                    ]
                  },
                  {
                    "activity": "115-pipeBooksPopularityRank",
                    "dependencyConditions": [
                      "Completed"
                    ]
                  }
                ],
                "userProperties": [],
                "typeProperties": {
                  "pipeline": {
                    "referenceName": "pipeDataQualityControls",
                    "type": "PipelineReference"
                  },
                  "parameters": {
                    "PipelineName": {
                      "value": "@pipeline().Pipeline",
                      "type": "Expression"
                    },
                    "PipelineRunID": {
                      "value": "@pipeline().RunId",
                      "type": "Expression"
                    },
                    "PipelineTriggerType": {
                      "value": "@pipeline().TriggerType",
                      "type": "Expression"
                    },
                    "PipelineTriggerTime": {
                      "value": "@formatDateTime(pipeline().TriggerTime, 's')",
                      "type": "Expression"
                    },
                    "PipelineTriggerName": {
                      "value": "@pipeline().TriggerName",
                      "type": "Expression"
                    },
                    "WindowStart": {
                      "value": "@pipeline().parameters.WindowStart",
                      "type": "Expression"
                    },
                    "WindowEnd": {
                      "value": "@pipeline().parameters.WindowEnd",
                      "type": "Expression"
                    }
                  }
                }
              },
              {
                "name": "112-pipeZZZMetadataMaster",
                "type": "ExecutePipeline",
                "dependsOn": [],
                "userProperties": [],
                "typeProperties": {
                  "pipeline": {
                    "referenceName": "pipeZZZMetadataMaster",
                    "type": "PipelineReference"
                  },
                  "waitOnCompletion": true,
                  "parameters": {
                    "WindowStart": {
                      "value": "@pipeline().parameters.WindowStart",
                      "type": "Expression"
                    },
                    "WindowEnd": {
                      "value": "@pipeline().parameters.WindowEnd",
                      "type": "Expression"
                    }
                  }
                }
              },
              {
                "name": "702-pipeModelRefreshers",
                "description": "Runs refreshment of data models that are reliant of data from previous data pipelines, e.g. Analysis Services cubes and PowerBI models with import mode.",
                "type": "ExecutePipeline",
                "dependsOn": [
                  {
                    "activity": "701-pipeZZZEditionDailySnapshotMaster",
                    "dependencyConditions": [
                      "Succeeded"
                    ]
                  }
                ],
                "userProperties": [],
                "typeProperties": {
                  "pipeline": {
                    "referenceName": "pipeModelRefreshers",
                    "type": "PipelineReference"
                  },
                  "parameters": {
                    "Datasets": {
                      "value": "[concat('[\n   \"ed37a02d-c9b3-4f4b-b522-a3081fc5d2e1\",\n   \"7cf47e8e-a69b-42f3-acc0-5326c80fbb16\",\n   \"ba21e148-4530-457c-b557-3c8f9ac40e77\",\n   \"caf9561a-8179-433f-8c5c-fe96717364af\",\n   \"f43229c3-ce89-49ce-b701-1d91b161844e\",\n   \"6cac279d-b1c6-45c9-927a-161611dc5e4d\",\n   \"5e60d4a1-8016-4a4a-9be0-d6711759c501\"\n]\n')]",
                      "type": "Expression"
                    }
                  }
                }
              }
            ],
            "parameters": {
              "WindowStart": {
                "type": "String"
              },
              "WindowEnd": {
                "type": "String"
              }
            },
            "annotations": []
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/pipelines/pipeZZZAccountsMaster')]",
            "[concat(variables('factoryId'), '/pipelines/pipeZZZAccountsWithDelayMaster')]",
            "[concat(variables('factoryId'), '/pipelines/pipeZZZGiftCardsMaster')]",
            "[concat(variables('factoryId'), '/pipelines/pipeZZZBooksMaster')]",
            "[concat(variables('factoryId'), '/pipelines/pipeZZZDistributionMaster')]",
            "[concat(variables('factoryId'), '/pipelines/pipeZZZReadingsDailyMaster')]",
            "[concat(variables('factoryId'), '/pipelines/pipeZZZSettlementsMaster')]",
            "[concat(variables('factoryId'), '/pipelines/pipeZZZUsersMaster')]",
            "[concat(variables('factoryId'), '/pipelines/pipeZZZPricingMaster')]",
            "[concat(variables('factoryId'), '/pipelines/pipeZZZCategoriesMaster')]",
            "[concat(variables('factoryId'), '/pipelines/pipeZZZAppViewsMaster')]",
            "[concat(variables('factoryId'), '/pipelines/pipeZZZListsMaster')]",
            "[concat(variables('factoryId'), '/pipelines/pipeZZZMailchimpMaster')]",
            "[concat(variables('factoryId'), '/pipelines/pipeZZZOrganizationsMaster')]",
            "[concat(variables('factoryId'), '/pipelines/pipeZZZRevenueMaster')]",
            "[concat(variables('factoryId'), '/pipelines/pipeZZZUsageConsumptionMaster')]",
            "[concat(variables('factoryId'), '/pipelines/pipeZZZUserSnapshotMaster')]",
            "[concat(variables('factoryId'), '/pipelines/pipeDefineAppTablesSQLDWStoredProc')]",
            "[concat(variables('factoryId'), '/pipelines/pipeZZZInternalMaster')]",
            "[concat(variables('factoryId'), '/pipelines/pipeBooksPopularityRankSQLDWToASBlob')]",
            "[concat(variables('factoryId'), '/pipelines/pipeMailchimpUploadDatabricks')]",
            "[concat(variables('factoryId'), '/pipelines/pipeZZZEventLogDailyMaster')]",
            "[concat(variables('factoryId'), '/pipelines/pipeAutomaticListsGenerate')]",
            "[concat(variables('factoryId'), '/pipelines/pipeZZZEditionDailySnapshotMaster')]",
            "[concat(variables('factoryId'), '/pipelines/pipeZZZManualMaster')]",
            "[concat(variables('factoryId'), '/pipelines/pipeDataQualityControls')]",
            "[concat(variables('factoryId'), '/pipelines/pipeZZZMetadataMaster')]",
            "[concat(variables('factoryId'), '/pipelines/pipeModelRefreshers')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/dsADLBooksEditionsLatest')]",
          "type": "Microsoft.DataFactory/factories/datasets",
          "apiVersion": "2018-06-01",
          "properties": {
            "linkedServiceName": {
              "referenceName": "lsProdbbAzureDataLakeStore",
              "type": "LinkedServiceReference"
            },
            "annotations": [],
            "type": "AzureDataLakeStoreFile",
            "structure": [
              {
                "name": "Id",
                "type": "Int32"
              },
              {
                "name": "Title",
                "type": "String"
              },
              {
                "name": "Isbn",
                "type": "String"
              },
              {
                "name": "Cover",
                "type": "String"
              },
              {
                "name": "Publisher",
                "type": "String"
              },
              {
                "name": "PublishDate",
                "type": "DateTime"
              },
              {
                "name": "Language",
                "type": "Int32"
              },
              {
                "name": "CreatedAt",
                "type": "DateTime"
              },
              {
                "name": "ModifiedAt",
                "type": "DateTime"
              },
              {
                "name": "DeletedAt",
                "type": "DateTime"
              },
              {
                "name": "Book_Id",
                "type": "Int32"
              },
              {
                "name": "ContentType",
                "type": "Int32"
              },
              {
                "name": "Pages",
                "type": "Int64"
              },
              {
                "name": "Duration",
                "type": "Int64"
              },
              {
                "name": "BookBeatPublishDate",
                "type": "DateTime"
              },
              {
                "name": "BookBeatViewDate",
                "type": "DateTime"
              },
              {
                "name": "BookBeatUnpublishDate",
                "type": "DateTime"
              },
              {
                "name": "SerializedApprovals",
                "type": "String"
              },
              {
                "name": "SerializedMarketRights",
                "type": "String"
              },
              {
                "name": "SerializedCopyrightOwners",
                "type": "String"
              }
            ],
            "typeProperties": {
              "format": {
                "type": "OrcFormat"
              },
              "fileName": "[parameters('dsADLBooksEditionsLatest_properties_typeProperties_fileName')]",
              "folderPath": "[parameters('dsADLBooksEditionsLatest_properties_typeProperties_folderPath')]"
            }
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/linkedServices/lsProdbbAzureDataLakeStore')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/dsADLBooksEditions')]",
          "type": "Microsoft.DataFactory/factories/datasets",
          "apiVersion": "2018-06-01",
          "properties": {
            "linkedServiceName": {
              "referenceName": "lsProdbbAzureDataLakeStore",
              "type": "LinkedServiceReference"
            },
            "parameters": {
              "WindowStart": {
                "type": "String"
              }
            },
            "annotations": [],
            "type": "AzureDataLakeStoreFile",
            "structure": [
              {
                "name": "Id",
                "type": "Int32"
              },
              {
                "name": "Title",
                "type": "String"
              },
              {
                "name": "Isbn",
                "type": "String"
              },
              {
                "name": "Cover",
                "type": "String"
              },
              {
                "name": "Publisher",
                "type": "String"
              },
              {
                "name": "PublishDate",
                "type": "DateTime"
              },
              {
                "name": "Language",
                "type": "Int32"
              },
              {
                "name": "CreatedAt",
                "type": "DateTime"
              },
              {
                "name": "ModifiedAt",
                "type": "DateTime"
              },
              {
                "name": "DeletedAt",
                "type": "DateTime"
              },
              {
                "name": "Book_Id",
                "type": "Int32"
              },
              {
                "name": "ContentType",
                "type": "Int32"
              },
              {
                "name": "Pages",
                "type": "Int64"
              },
              {
                "name": "Duration",
                "type": "Int64"
              },
              {
                "name": "BookBeatPublishDate",
                "type": "DateTime"
              },
              {
                "name": "BookBeatViewDate",
                "type": "DateTime"
              },
              {
                "name": "BookBeatUnpublishDate",
                "type": "DateTime"
              },
              {
                "name": "SerializedApprovals",
                "type": "String"
              },
              {
                "name": "SerializedMarketRights",
                "type": "String"
              },
              {
                "name": "SerializedCopyrightOwners",
                "type": "String"
              }
            ],
            "typeProperties": {
              "format": {
                "type": "TextFormat",
                "columnDelimiter": "|",
                "rowDelimiter": "\n",
                "quoteChar": "\"",
                "nullValue": "",
                "encodingName": "UTF-8",
                "treatEmptyAsNull": true,
                "firstRowAsHeader": true
              },
              "fileName": {
                "value": "[parameters('dsADLBooksEditions_properties_typeProperties_fileName')]",
                "type": "Expression"
              },
              "folderPath": {
                "value": "[parameters('dsADLBooksEditions_properties_typeProperties_folderPath')]",
                "type": "Expression"
              }
            }
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/linkedServices/lsProdbbAzureDataLakeStore')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/dsSQLBBBooksEditions')]",
          "type": "Microsoft.DataFactory/factories/datasets",
          "apiVersion": "2018-06-01",
          "properties": {
            "linkedServiceName": {
              "referenceName": "lsProdbbSQLBBBooks",
              "type": "LinkedServiceReference"
            },
            "annotations": [],
            "type": "AzureSqlTable",
            "structure": [
              {
                "name": "Id",
                "type": "Int32"
              },
              {
                "name": "Title",
                "type": "String"
              },
              {
                "name": "Isbn",
                "type": "Double"
              },
              {
                "name": "Cover",
                "type": "String"
              },
              {
                "name": "Publisher",
                "type": "String"
              },
              {
                "name": "PublishDate",
                "type": "DateTime"
              },
              {
                "name": "Language",
                "type": "Int32"
              },
              {
                "name": "CreatedAt",
                "type": "DateTime"
              },
              {
                "name": "ModifiedAt",
                "type": "DateTime"
              },
              {
                "name": "DeletedAt",
                "type": "String"
              },
              {
                "name": "Book_Id",
                "type": "Int32"
              },
              {
                "name": "ContentType",
                "type": "Int32"
              },
              {
                "name": "Pages",
                "type": "String"
              },
              {
                "name": "Duration",
                "type": "String"
              },
              {
                "name": "BookBeatPublishDate",
                "type": "String"
              },
              {
                "name": "BookBeatViewDate",
                "type": "String"
              },
              {
                "name": "BookBeatUnpublishDate",
                "type": "String"
              },
              {
                "name": "SerializedApprovals",
                "type": "String"
              },
              {
                "name": "SerializedMarketRights",
                "type": "String"
              },
              {
                "name": "SerializedCopyrightOwners",
                "type": "String"
              }
            ],
            "typeProperties": {
              "tableName": "[concat('[dbo].[Editions]')]"
            }
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]",
            "[concat(variables('factoryId'), '/linkedServices/lsProdbbSQLBBBooks')]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/lsProdbbSQLDW')]",
          "type": "Microsoft.DataFactory/factories/linkedServices",
          "apiVersion": "2018-06-01",
          "properties": {
            "annotations": [],
            "type": "AzureSqlDW",
            "typeProperties": {
              "connectionString": "[parameters('lsProdbbSQLDW_connectionString')]"
            }
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/lsProdbbAzureDataLakeStore')]",
          "type": "Microsoft.DataFactory/factories/linkedServices",
          "apiVersion": "2018-06-01",
          "properties": {
            "annotations": [],
            "type": "AzureDataLakeStore",
            "typeProperties": {
              "dataLakeStoreUri": "[parameters('lsProdbbAzureDataLakeStore_properties_typeProperties_dataLakeStoreUri')]",
              "tenant": "[parameters('lsProdbbAzureDataLakeStore_properties_typeProperties_tenant')]",
              "subscriptionId": "[parameters('lsProdbbAzureDataLakeStore_properties_typeProperties_subscriptionId')]",
              "resourceGroupName": "[parameters('lsProdbbAzureDataLakeStore_properties_typeProperties_resourceGroupName')]"
            }
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/lsProdbbSQLBBBooks')]",
          "type": "Microsoft.DataFactory/factories/linkedServices",
          "apiVersion": "2018-06-01",
          "properties": {
            "annotations": [],
            "type": "AzureSqlDatabase",
            "typeProperties": {
              "connectionString": "[parameters('lsProdbbSQLBBBooks_connectionString')]"
            }
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]"
          ]
        },
        {
          "name": "[concat(parameters('datafactoryName'), '/lsProdbbAzureDatabricksWorm')]",
          "type": "Microsoft.DataFactory/factories/linkedServices",
          "apiVersion": "2018-06-01",
          "properties": {
            "annotations": [],
            "type": "AzureDatabricks",
            "typeProperties": {
              "domain": "https://southcentralus.azuredatabricks.net",
              "accessToken": {
                "type": "SecureString",
                "value": "[parameters('lsProdbbAzureDatabricksWorm_accessToken')]"
              },
              "existingClusterId": "0131-155731-table418"
            }
          },
          "dependsOn": [
            "[concat('Microsoft.DataFactory/factories/', parameters('datafactoryName'))]"
          ]
        }
      ]
    },
    {
      "apiVersion": "2016-11-01",
      "name": "[parameters('DataLakeName')]",
      "tags": {
        "displayName": "Data Lake"
      },
      "location": "centralus",
      "type": "Microsoft.DataLakeStore/accounts",
      "properties": {
        "newTier": "Consumption",
        "encryptionState": "Enabled",
        "encryptionConfig": {
          "type": "ServiceManaged"
        }
      }
    },
    {
      "name": "[parameters('AzureSQLserverName')]",
      "type": "Microsoft.Sql/servers",
      "location": "[resourceGroup().location]",
      "apiVersion": "2014-04-01-preview",
      "dependsOn": [],
      "tags": {
        "displayName": "AzureSQLdbserver"
      },
      "properties": {
        "administratorLogin": "[parameters('AzureSQLserverAdminLogin')]",
        "administratorLoginPassword": "[parameters('AzureSQLserverAdminLoginPassword')]"
      },
      "resources": [
        {
          "name": "AllowAllWindowsAzureIps",
          "type": "firewallrules",
          "location": "[resourceGroup().location]",
          "apiVersion": "2014-04-01-preview",
          "dependsOn": [
            "[resourceId('Microsoft.Sql/servers', parameters('AzureSQLserverName'))]"
          ],
          "properties": {
            "startIpAddress": "0.0.0.0",
            "endIpAddress": "0.0.0.0"
          }
        },
        {
          "name": "[parameters('AzureSQLDBName-bookbeat')]",
          "type": "databases",
          "location": "[resourceGroup().location]",
          "apiVersion": "2014-04-01-preview",
          "dependsOn": [
            "[resourceId('Microsoft.Sql/servers', parameters('AzureSQLserverName'))]"
          ],
          "tags": {
            "displayName": "AzureSQLDB-bookbeat"
          },
          "properties": {
            "collation": "[parameters('AzureSQLDBCollation')]",
            "edition": "[parameters('AzureSQLDBEdition')]",
            "maxSizeBytes": "1073741824",
            "requestedServiceObjectiveName": "[parameters('AzureSQLDBRequestedServiceObjectiveName')]"
          },
          "resources": [
            {
              "name": "AzureSQLDBIMPORT",
              "type": "extensions",
              "apiVersion": "2014-04-01-preview",
              "dependsOn": [
                "[resourceId('Microsoft.Sql/servers/databases', split(concat(parameters('AzureSQLserverName'), '/', parameters('AzureSQLDBName-bookbeat')), '/')[0], split(concat(parameters('AzureSQLserverName'), '/', parameters('AzureSQLDBName-bookbeat')), '/')[1])]"
              ],
              "tags": {
                "displayName": "AzureSQLDBIMPORT"
              },
              "properties": {
                "storageKeyType": "[parameters('AzureSQLDBIMPORTStorageKeyType')]",
                "storageKey": "[parameters('AzureSQLDBIMPORTStorageKey')]",
                "storageUri": "[parameters('AzureSQLDBIMPORTStorageUri-bookbeat')]",
                "administratorLogin": "[parameters('AzureSQLDBIMPORTAdministratorLogin')]",
                "administratorLoginPassword": "[parameters('AzureSQLDBIMPORTAdministratorLoginPassword')]",
                "operationMode": "Import"
              }
            }
          ]
        }
      ]
    },
    {
      "type": "Microsoft.Sql/servers/databases",
      "tags": {
        "displayName": "Azure SQL Data Warehouse"
      },
      "apiVersion": "2014-04-01-preview",
      "dependsOn": [
        "[resourceId('Microsoft.Sql/servers', parameters('AzureSQLserverName'))]"
      ],
      "location": "[resourceGroup().location]",
      "name": "[concat(parameters('AzureSQLserverName'), '/', parameters('AzureSQLDataWarehousedatabaseName'))]",
      "properties": {
        "edition": "DataWarehouse",
        "collation": "SQL_Latin1_General_CP1_CI_AS"
      }
    },
    {
      "apiVersion": "2018-04-01",
      "location": "[resourceGroup().location]",
      "name": "[parameters('databricksworkspaceName')]",
      "sku": {
        "name": "standard"
      },
      "comments": "Please do not use an existing resource group for ManagedResourceGroupId.",
      "properties": {
        "ManagedResourceGroupId": "[variables('managedResourceGroupId')]"
      },
      "type": "Microsoft.Databricks/workspaces"
    }
  ],
  "outputs": {
    "jumphostDnsName": {
      "type": "string",
      "value": "[concat(variables('JumpHostDnsName'), '.', resourceGroup().location, '.cloudapp.azure.com')]"
    },
    "storageAccountName": {
      "type": "string",
      "value": "[parameters('PrimaryStorageAccountName')]"
    },
    "storageAccountKey": {
      "type": "string",
      "value": "[parameters('PrimaryStorageAccountKey')]"
    },
    "MyResourceGroupName": {
      "type": "string",
      "value": "[resourcegroup().name]"
    },
    "jumphostUsername": {
      "type": "string",
      "value": "[parameters('vmLocalUserName')]"
    },
    "jumphostPassword": {
      "type": "string",
      "value": "[parameters('vmLocalUserPassword')]"
    },
    "resourceGroupName": {
      "type": "string",
      "value": "[resourcegroup().name]"
    }
  }
}